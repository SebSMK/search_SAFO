var Manager,ViewManager,EventsManager;
(function(b){b(function(){ModelManager.setModel(b.address.value(),"url");var a=smkCommon.getCurrentLanguage(),c=new Configurator.constructor;c.load_json("conf/solr_conf.json");var e=c.get_server(),d=c.get_server_proxy(),f=c.get_exposed_params(),h=c.get_fq_default(),g=c.get_fl_options(),k=c.get_q_default(),l=c.get_sort_default(),q=c.get_qf_default(),p=c.get_scroll_rows_default(),y=c.get_rows_default(),D=c.get_filter_facets(),n=c.get_autocomplete_facets(),v=c.get_all_facets();smkCommon.setMode(c.get_mode());
smkCommon.setVersion(c.get_version());c=new Language.constructor;c.load_json("language/language.json");c.setLanguage(a);ViewManager=new ViewManager.constructor({template:Mustache.getTemplate("templates/general_template.html"),target:"#smk_search_wrapper"});EventsManager=new EventsManager.constructor;var B=b.proxy(EventsManager.allWidgetsProcessed,EventsManager),x=b.proxy(ViewManager.generalSolrError,ViewManager);Manager=new AjaxSolr.smkManager({solrUrl:e,proxyUrl:d,store:new AjaxSolr.smkParameterStore({exposed:f,
fq_default:h,fl_options:{list:g.list,detail:g.detail,"default":g["default"]},q_default:k,qf_default:q,sort_default:l,scroll_rows_default:p,facets_default:D,current_lang:a}),allWidgetsProcessed:B,generalSolrError:x,translator:c,id:"Manager"});var k={"facet.limit":-1,"facet.mincount":1,rows:y,defType:"edismax",start:0,"json.nl":"map"},G;for(G in k)Manager.store.addByValue(G,k[G]);h=new AjaxSolr.smkManager({solrUrl:e,proxyUrl:d,store:new AjaxSolr.smkParameterStore({exposed:f,fq_default:h,fl_options:{parts:g.parts},
scroll_rows_default:p,current_lang:a}),allWidgetsProcessed:B,generalSolrError:x,translator:c,id:"partsManager"});p=new AjaxSolr.smkManager({solrUrl:e,proxyUrl:d,store:new AjaxSolr.smkParameterStore({exposed:f,fq_default:null,fl_options:{related:g.related},scroll_rows_default:p,current_lang:a}),allWidgetsProcessed:B,generalSolrError:x,translator:c,id:"relatedManager"});a=new AjaxSolr.smkManager({solrUrl:e,proxyUrl:d,store:new AjaxSolr.smkParameterStore({exposed:f,fq_default:null,fl_options:{detail:g.detail},
current_lang:a}),allWidgetsProcessed:B,generalSolrError:x,translator:c,id:"getDetailManager"});Manager.addWidget(new AjaxSolr.SearchBoxWidget({id:"searchbox",target:"#searchbox",template:Mustache.getTemplate("templates/search_box.html")}));Manager.addWidget(new AjaxSolr.SearchInfoWidget({id:"search-info",target:"#searchinfo",template:Mustache.getTemplate("templates/search_info.html")}));Manager.addWidget(new AjaxSolr.SearchBoxAutoWidget({id:"searchboxauto",target:"#searchboxauto",template:Mustache.getTemplate("templates/search_box.html"),
fields:n}));Manager.addWidget(new AjaxSolr.LanguagePickerWidget({id:"lang-picker",target:"#lang-picker",template:Mustache.getTemplate("templates/language_picker.html")}));Manager.addWidget(new AjaxSolr.SorterWidget({id:"sorter",target:"#sorter",options:{all:[{value:"score desc"},{value:"object_production_date_earliest asc"},{value:"object_production_date_earliest desc"},{value:"artist_first_name asc"},{value:"artist_first_name desc"},{value:"last_update desc"}]},template:Mustache.getTemplate("templates/sorter.html")}));
Manager.addWidget(new AjaxSolr.CheckBoxWidget({id:"checkbox",target:"#checkbox",field:"medium_image_url",template:Mustache.getTemplate("templates/checkbox.html")}));Manager.addWidget(new AjaxSolr.TeasersWidget({id:"teasers",target:"#smk_teasers",template:Mustache.getTemplate("templates/teasers.html"),initTemplate:"#teaserInitTemplate"}));Manager.addWidget(new AjaxSolr.AdvancedSearchWidget({id:"advanced",target:"#advanced",template:Mustache.getTemplate("templates/advancedsearch.html"),facets_list:Manager.store.facets_default}));
n=0;for(e=v.length;n<e;n++)Manager.addWidget(new AjaxSolr.SearchFiltersWidget({id:"adv_"+v[n],target:"#adv_"+v[n],field:v[n],template:Mustache.getTemplate("templates/chosen.html")}));Manager.addWidget(new AjaxSolr.DateRangeWidget({id:"adv_acq_date_range",target:"#adv_acq_date_range",field:{max:"acq_date_earliest",min:"acq_date_latest"},template:Mustache.getTemplate("templates/daterange.html")}));Manager.addWidget(new AjaxSolr.DetailWidget({id:"details",target:"#smk_detail",template:Mustache.getTemplate("templates/detail.html")}));
n=new AjaxSolr.TeasersWidget({id:"parts",target:"#components",template:Mustache.getTemplate("templates/teasers.html"),initTemplate:"#relatedInitTemplate"});e=new AjaxSolr.TeasersWidget({id:"related",target:"#related",template:Mustache.getTemplate("templates/teasers.html"),initTemplate:"#relatedInitTemplate"});d=new AjaxSolr.OriginalWidget({id:"original",target:"#tab_original",template:Mustache.getTemplate("templates/detail_tabs.html")});Manager.addWidget(new AjaxSolr.DetailTabsWidget({id:"details_tabs",
target:"#smk_detail_tabs",template:Mustache.getTemplate("templates/detail_tabs.html"),partsManager:h,parts_subWidget:n,relatedManager:p,related_subWidget:e,originalManager:a,original_subWidget:d}));b(Manager.widgets.checkbox).on("hasimage",{self:Manager.widgets.checkbox},function(a){EventsManager.smk_search_filter_changed(a.data.self,a.params)});n=0;for(e=v.length;n<e;n++)b(Manager.widgets["adv_"+v[n]]).on("smk_search_filter_changed",{self:Manager.widgets["adv_"+v[n]]},function(a){EventsManager.smk_search_filter_changed(a.data.self,
a.params)});b(Manager.widgets.sorter).on("smk_search_sorter_changed",function(a){EventsManager.smk_search_sorter_changed(a.params,v)});b(Manager.widgets.searchbox).on("smk_search_q_added",function(a){EventsManager.smk_search_q_added(a)});b(Manager.widgets.searchboxauto).on("smk_search_filter_changed",function(a){EventsManager.smk_search_filter_changed(null,a.params)});b(Manager.widgets.searchboxauto).on("smk_search_q_added",function(a){EventsManager.smk_search_q_added(a)});b(Manager.widgets.teasers).on("smk_search_call_detail",
function(a){EventsManager.smk_search_call_detail(a)});b(Manager.widgets.details_tabs).on("smk_search_call_detail",function(a){EventsManager.smk_search_call_detail(a)});b(Manager.widgets["lang-picker"]).on("smk_lang_changed",function(a){EventsManager.smk_lang_changed(a.value)});b(Manager.widgets.teasers).on("smk_teasers_all_images_loaded",function(a){EventsManager.smk_teasers_all_images_loaded(v)});b(Manager.widgets.details).on("smk_detail_this_img_loaded",function(a){EventsManager.smk_detail_this_img_loaded()});
b(Manager.widgets.details_tabs).on("smk_search_detail_tabs_loaded",function(a){EventsManager.smk_search_detail_tabs_loaded()});ViewManager.init();Manager.init();EventsManager.init();n=smkCommon.getSearchPOST();void 0!==n&&""!=n&&(a={},a.q=n,ModelManager.update(a))})})(jQuery);AjaxSolr=function(){};AjaxSolr.Class=function(b){AjaxSolr.extend(this,b)};AjaxSolr.Class.extend=function(b,a){var c=this,e;e=b&&Object.prototype.hasOwnProperty.call(b,"constructor")?b.constructor:function(){return c.apply(this,arguments)};AjaxSolr.extend(e,c,a);var d=function(){this.constructor=e};d.prototype=c.prototype;e.prototype=new d;b&&AjaxSolr.extend(e.prototype,b);e.__super__=c.prototype;return e};
AjaxSolr.extend=function(b){var a=Array.prototype.slice.call(arguments,1),c=function(a){if(a)for(var c in a)b[c]=a[c]};if(null!=a){if(Array.prototype.forEach&&a.forEach===Array.prototype.forEach)a.forEach(c);else if(a.length===+a.length)for(var e=0,d=a.length;e<d;e++)c.call(void 0,a[e],e,a);else for(e in a)Object.prototype.hasOwnProperty.call(a,e)&&c.call(void 0,a[e],e,a);return b}};AjaxSolr.inArray=function(b,a){if(a)for(var c=0,e=a.length;c<e;c++)if(AjaxSolr.equals(a[c],b))return c;return-1};
AjaxSolr.equals=function(b,a){if(AjaxSolr.isArray(b)&&AjaxSolr.isArray(a)){if(b.length!==a.length)return!1;for(var c=0,e=b.length;c<e;c++)if(b[c]!==a[c])return!1;return!0}return AjaxSolr.isRegExp(b)&&AjaxSolr.isString(a)?a.match(b):AjaxSolr.isRegExp(a)&&AjaxSolr.isString(b)?b.match(a):b===a};AjaxSolr.isArray=function(b){return null!=b&&"object"==typeof b&&"splice"in b&&"join"in b};AjaxSolr.isRegExp=function(b){return null!=b&&("object"==typeof b||"function"==typeof b)&&"ignoreCase"in b};
AjaxSolr.isString=function(b){return null!=b&&"string"==typeof b};(function(b){"function"===typeof define&&define.amd?define(["core/Core"],b):b()})(function(){AjaxSolr.AbstractManager=AjaxSolr.Class.extend({constructor:function(b){AjaxSolr.extend(this,{solrUrl:"http://localhost:8983/solr/",proxyUrl:null,servlet:"select",response:{},widgets:{},store:null,initialized:!1},b)},init:function(){this.initialized=!0;null===this.store&&this.setStore(new AjaxSolr.ParameterStore);for(var b in this.widgets)this.widgets[b].init();this.store.init()},setStore:function(b){b.manager=
this;this.store=b},addWidget:function(b){b.manager=this;this.widgets[b.id]=b},doRequest:function(b,a){!1===this.initialized&&this.init();void 0!==b&&this.store.get("start").val(b);void 0===a&&(a=this.servlet);for(var c in this.widgets)this.widgets[c].beforeRequest();this.executeRequest(a)},executeRequest:function(b,a){throw"Abstract method executeRequest must be overridden in a subclass.";},handleResponse:function(b){this.response=b;for(var a in this.widgets)this.widgets[a].afterRequest()},handleError:function(b){window.console&&
console.log&&console.log(b)}})});(function(b){"function"===typeof define&&define.amd?define(["core/AbstractManager"],b):b()})(function(){AjaxSolr.smkManager=AjaxSolr.AbstractManager.extend({constructor:function(b){AjaxSolr.smkManager.__super__.constructor.apply(this,arguments);AjaxSolr.extend(this,{allWidgetsProcessed:null,generalSolrError:null,translator:null,id:null},b)},xhr:null,executeRequest:function(b,a,c,e){var d=this;e={dataType:"jsonp"};prev_string=this.store.storedString();a=a||this.store.string();c=c||function(a){d.handleResponse(a)};
this.proxyUrl?(e.url=this.proxyUrl+"?wt=json",e.data={query:a,prev_query:prev_string,solrUrl:this.solrUrl,language:smkCommon.getCurrentLanguage()},e.type="POST"):e.url=this.solrUrl+b+"?"+a+"&wt=json&json.wrf=?";this.getJSONP(e,c)},getJSONP:function(b,a,c){var e=this;b.url=b.url+"&callback="+function(a){};b.success=a;this.xhr=jQuery.ajax(b);var d=$(document.getElementsByTagName("head")[0].firstChild);((d.attr("src")||"").match(/callback=(\w+)/)||[])[1]&&(d[0].onerror=function(a){d.remove();null!=e.generalSolrError&&
e.generalSolrError("error");clearTimeout(0)})},requestAbort:function(){null!=this.xhr&&this.xhr.abort()},handleResponse:function(b){this.response=b;for(var a in this.widgets)this.widgets[a].afterRequest();null!=this.allWidgetsProcessed&&this.allWidgetsProcessed()}})});(function(b){"function"===typeof define&&define.amd?define(["core/Core"],b):b()})(function(){AjaxSolr.Parameter=AjaxSolr.Class.extend({constructor:function(b){AjaxSolr.extend(this,{name:null,value:null,locals:{}},b)},val:function(b){if(void 0===b)return this.value;this.value=b},local:function(b,a){if(void 0===a)return this.locals[b];this.locals[b]=a},remove:function(b){delete this.locals[b]},string:function(){var b=[],a;for(a in this.locals)this.locals[a]&&b.push(a+"="+encodeURIComponent(this.locals[a]));
b=b.length?"{!"+b.join("%20")+"}":"";return this.value?this.name+"="+b+this.valueString(this.value):"q"==this.name&&b?"q.alt="+b+encodeURIComponent("*:*"):""},parseString:function(b){if(b=b.match(/^([^=]+)=(?:\{!([^\}]*)\})?(.*)$/)){for(var a;a=/([^\s=]+)=(\S*)/g.exec(decodeURIComponent(b[2]));)this.locals[a[1]]=decodeURIComponent(a[2]),b[2]=b[2].replace(a[0],"");"q.alt"==b[1]?this.name="q":(this.name=b[1],this.value=this.parseValueString(b[3]))}},valueString:function(b){b=AjaxSolr.isArray(b)?b.join(","):
b;return encodeURIComponent(b)},parseValueString:function(b){b=decodeURIComponent(b);return-1==b.indexOf(",")?b:b.split(",")}});AjaxSolr.Parameter.escapeValue=function(b){return b.match(/[ :\/"]/)&&!b.match(/[\[\{]\S+ TO \S+[\]\}]/)?'"'+b.replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"':b};AjaxSolr.Parameter.unescapeValue=function(b){return b.match(/\\\\/)||b.match(/\\"/)?b.replace(/\\"/g,'"').replace(/\\\\/g,"\\"):b}});(function(b){"function"===typeof define&&define.amd?define(["core/Core","core/Parameter"],b):b()})(function(){AjaxSolr.ParameterStore=AjaxSolr.Class.extend({constructor:function(b){AjaxSolr.extend(this,{exposed:[],params:{},manager:null},b)},init:function(){},isMultiple:function(b){return b.match(/^(?:bf|bq|facet\.date|facet\.date\.other|facet\.date\.include|facet\.field|facet\.pivot|facet\.range|facet\.range\.other|facet\.range\.include|facet\.query|fq|group\.field|group\.func|group\.query|pf|qf)$/)},
get:function(b){if(void 0===this.params[b]){var a=new AjaxSolr.Parameter({name:b});this.isMultiple(b)?this.params[b]=[a]:this.params[b]=a}return this.params[b]},values:function(b){if(void 0!==this.params[b]){if(this.isMultiple(b)){for(var a=[],c=0,e=this.params[b].length;c<e;c++)a.push(this.params[b][c].val());return a}return[this.params[b].val()]}return[]},add:function(b,a){void 0===a&&(a=new AjaxSolr.Parameter({name:b}));if(this.isMultiple(b))if(void 0===this.params[b])this.params[b]=[a];else if(-1==
AjaxSolr.inArray(a.val(),this.values(b)))this.params[b].push(a);else return!1;else this.params[b]=a;return a},remove:function(b,a){void 0===a?delete this.params[b]:(this.params[b].splice(a,1),0==this.params[b].length&&delete this.params[b])},find:function(b,a){if(void 0!==this.params[b]){if(this.isMultiple(b)){for(var c=[],e=0,d=this.params[b].length;e<d;e++)AjaxSolr.equals(this.params[b][e].val(),a)&&c.push(e);return c.length?c:!1}if(AjaxSolr.equals(this.params[b].val(),a))return b}return!1},addByValue:function(b,
a,c){void 0===c&&(c={});if(this.isMultiple(b)&&AjaxSolr.isArray(a)){for(var e=[],d=0,f=a.length;d<f;d++)e.push(this.add(b,new AjaxSolr.Parameter({name:b,value:a[d],locals:c})));return e}return this.add(b,new AjaxSolr.Parameter({name:b,value:a,locals:c}))},removeByValue:function(b,a){var c=this.find(b,a);if(c)if(AjaxSolr.isArray(c))for(var e=c.length-1;0<=e;e--)this.remove(b,c[e]);else this.remove(c);return c},string:function(){var b=[],a,c;for(c in this.params)if(this.isMultiple(c))for(var e=0,d=
this.params[c].length;e<d;e++)(a=this.params[c][e].string())&&b.push(a);else(a=this.params[c].string())&&b.push(a);return b.join("&")},parseString:function(b){b=b.split("&");for(var a=0,c=b.length;a<c;a++)if(b[a]){var e=new AjaxSolr.Parameter;e.parseString(b[a]);this.add(e.name,e)}},exposedString:function(){for(var b=[],a,c=0,e=this.exposed.length;c<e;c++)if(void 0!==this.params[this.exposed[c]])if(this.isMultiple(this.exposed[c]))for(var d=0,f=this.params[this.exposed[c]].length;d<f;d++)(a=this.params[this.exposed[c]][d].string())&&
b.push(a);else(a=this.params[this.exposed[c]].string())&&b.push(a);return b.join("&")},exposedReset:function(){for(var b=0,a=this.exposed.length;b<a;b++)this.remove(this.exposed[b])},load:function(b){void 0===b&&(b=!0);b&&this.exposedReset();this.parseString(this.storedString())},save:function(){},storedString:function(){return""}})});(function(b){"function"===typeof define&&define.amd?define(["core/Core","core/ParameterStore"],b):b()})(function(){AjaxSolr.smkParameterStore=AjaxSolr.ParameterStore.extend({constructor:function(b){AjaxSolr.smkParameterStore.__super__.constructor.apply(this,arguments);AjaxSolr.extend(this,{fl_options:null,fq_default:null,q_default:null,qf_default:null,sort_default:null,scroll_rows_default:null,facets_default:null,current_lang:null},b)},find:function(b,a){if(void 0!==this.params[b]){if(this.isMultiple(b)){for(var c=
[],e=0,d=this.params[b].length;e<d;e++)-1<this.params[b][e].val().indexOf(a)&&c.push(e);return c.length?c:!1}if(AjaxSolr.equals(this.params[b].val(),a))return b}return!1},removeElementFrom_q:function(b){if(b=this.findIn_q(b))if(AjaxSolr.isArray(b))for(var a=b.length-1;0<=a;a--)this.removeIn_q_value(b[a]);else this.remove(b);return b},get_qf_string:function(){var b="";null!==this.qf_default&&null!=this.qf_default[this.current_lang]&&$.each(this.qf_default[this.current_lang],function(a,c){b=b.concat(sprintf(" %s^%s",
a,c))});return b},set_current_lang:function(b){this.current_lang=b},extract_fq_without_default:function(){var b=null==this.get("fq")?[]:this.get("fq");return smkCommon.removeFirstFromArray(b,this.fq_default)},removeIn_q_value:function(b){void 0===b?delete this.params.q:(this.params.q.value.splice(b,1),0==this.params.q.value.length&&delete this.params.q)},findIn_q:function(b){if(void 0!==this.params.q){for(var a=[],c=0,e=this.params.q.val().length;c<e;c++)AjaxSolr.equals(this.params.q.val()[c],b)&&
a.push(c);return a.length?a:!1}return!1}})});(function(b){"function"===typeof define&&define.amd?define(["core/Core"],b):b()})(function(){AjaxSolr.AbstractWidget=AjaxSolr.Class.extend({constructor:function(b){AjaxSolr.extend(this,{id:null,target:null,start:void 0,servlet:void 0,manager:null,template:null},b)},init:function(){},beforeRequest:function(){},afterRequest:function(){},doRequest:function(b,a){this.manager.doRequest(b||this.start,a||this.servlet)},getRefresh:function(){return $(this.target).is(":hidden")||$(this.target).hasClass("no_refresh")?
!1:!0},setRefresh:function(b){b?$(this.target).removeClass("no_refresh"):$(this.target).addClass("no_refresh")}})});(function(b){AjaxSolr.DetailWidget=AjaxSolr.AbstractWidget.extend({start:0,current_language:null,init:function(){this.current_language=this.manager.translator.getLanguage()},afterRequest:function(){var a=this,c=b(this.target);if(a.getRefresh())if(c.empty(),0==this.manager.response.response.docs.length)c.removeClass("image_loading").html(this.manager.translator.getLabel("no_results")),b(a).trigger({type:"smk_detail_this_img_loaded"});else{for(var e=null,d=new getData_Detail_Standard.constructor(this),
f=0,h=this.manager.response.response.docs.length;f<h;f++)e=d.get_data(this.manager.response.response.docs[f]);var e=a.template_integration_json({detail:e},"#detailTemplate"),g=b(e),e=g.find(".gallery__main");e.hasClass("matrix-tile-image-missing")?(c.prepend(g),b(a).trigger({type:"smk_detail_this_img_loaded"})):(d=d.getImage(e),e.prepend(b(d)),e.find("img").addClass("image-loading"),e.find("img").imagesLoaded().progress(function(e,d){b(d.img).removeClass("image-loading");c.prepend(g);b(b.find(".print a")).attr("href",
window.location.href);b(document).unbind("click.fb-start");c.find(".fancybox").fancybox({});b(a).trigger({type:"smk_detail_this_img_loaded"})}))}else a.setRefresh(!0)},template_integration_json:function(a,c){return Mustache.to_html(b(this.template).find(c).html(),a)}})})(jQuery);(function(b){AjaxSolr.DetailTabsWidget=AjaxSolr.AbstractWidget.extend({constructor:function(a){AjaxSolr.DetailTabsWidget.__super__.constructor.apply(this,arguments);AjaxSolr.extend(this,{partsManager:null,parts_subWidget:null,relatedManager:null,related_subWidget:null,originalManager:null,original_subWidget:null},a)},start:0,current_language:null,tab_related_id_req:null,tab_original_id_req:null,tab_multi_work_ref_req:null,tab_extended_html:null,tab_reference_html:null,init:function(){var a=this;a.current_language=
a.manager.translator.getLanguage();var c={rows:20,start:0,fl:a.relatedManager.store.fl_options.related,"json.nl":"map"},e={rows:20,start:0,fq:a.partsManager.store.fq_default,sort:"part_nr asc",fl:a.partsManager.store.fl_options.parts,"json.nl":"map"},d={rows:20,start:0,fl:a.originalManager.store.fl_options.detail,"json.nl":"map"},f;for(f in c)a.relatedManager.store.addByValue(f,c[f]);for(f in e)a.partsManager.store.addByValue(f,e[f]);for(f in d)a.originalManager.store.addByValue(f,d[f]);a.originalManager.addWidget(a.original_subWidget);
a.relatedManager.addWidget(a.related_subWidget);b(a.related_subWidget).on("smk_search_call_detail",function(c){b(a).trigger({type:"smk_search_call_detail",detail_url:c.detail_url,samewin:!0})});a.partsManager.addWidget(a.parts_subWidget);b(a.parts_subWidget).on("smk_search_call_detail",function(c){b(a).trigger({type:"smk_search_call_detail",detail_url:c.detail_url,samewin:!0})});b(a.parts_subWidget).on("smk_teasers_all_images_loaded",function(c){a.end_tab_process(a.parts_subWidget.target)});b(a.related_subWidget).on("smk_teasers_all_images_loaded",
function(c){a.end_tab_process(a.related_subWidget.target)});b(a.original_subWidget).on("smk_original_loaded",function(c){a.end_tab_process(a.original_subWidget.target)})},process_details_tabs:function(){var a=b(this.target);if(this.getRefresh())if(0==this.manager.response.response.docs.length)a.removeClass("image_loading").html(this.manager.translator.getLabel("no_results")),b(this).trigger({type:"smk_detail_tabs_loaded"});else{var a=null,c=new getData_Detail_Extended.constructor(this);this.tab_original_id_req=
this.tab_related_id_req=this.tab_multi_work_ref_req=null;for(var e=0,d=this.manager.response.response.docs.length;e<d;e++)a=c.get_data(this.manager.response.response.docs[e]),this.tab_multi_work_ref_req=a.subwidget.req_multiwork,this.tab_related_id_req=a.subwidget.req_relatedid,this.tab_original_id_req=a.subwidget.req_original,this.tab_reference_html=this.template_integration_json(a,"#detailReferenceTemplate"),this.tab_extended_html=this.template_integration_json(a.info,"#detailExtendedTemplate");
this.process_init_tabs();this.process_reference();this.process_related();this.process_parts();this.process_extended();this.process_extended_original()}else this.setRefresh(!0)},template_integration_json:function(a,c){return Mustache.to_html(b(this.template).find(c).html(),a)},removeAllParts:function(){this.parts_subWidget.removeAllArticles()},removeAllRelated:function(){this.related_subWidget.removeAllArticles()},process_related:function(){if(null!=this.tab_related_id_req&&null!=this.relatedManager){var a=
new AjaxSolr.Parameter({name:"q",value:this.tab_related_id_req});this.relatedManager.store.add(a.name,a);this.relatedManager.doRequest()}else this.end_tab_process("#related")},process_parts:function(){if(null!=this.tab_multi_work_ref_req&&null!=this.partsManager){var a=new AjaxSolr.Parameter({name:"q",value:this.tab_multi_work_ref_req});this.partsManager.store.add(a.name,a);this.partsManager.doRequest()}else this.end_tab_process("#components")},process_extended:function(){null!=this.tab_extended_html&&
(b(this.target).find("#extended_tab").html(this.tab_extended_html),smkCommon.debugLog()&&console.log("process_extended"+this.tab_extended_html.substring(0,50)));this.end_tab_process("#extended")},process_extended_original:function(){if(null!=this.tab_original_id_req&&null!=this.originalManager){var a=new AjaxSolr.Parameter({name:"q",value:this.tab_original_id_req});this.originalManager.store.add(a.name,a);this.originalManager.doRequest()}else this.end_tab_process("#tab_original")},process_reference:function(){null!=
this.tab_reference_html&&b(this.target).find("#reference_tab").html(this.tab_reference_html);this.end_tab_process("#reference")},process_show_extended_titles:function(){b(this.target).find("#extended_tab .data-section").each(function(){0==b(this).find(".data-pair").length&&b(this).hide()})},process_init_tabs:function(){var a=this,c=b(a.target);c.css("visibility","hidden");if(c.is(":empty")){var e=a.template_integration_json({},"#detailTemplate");c.html(e);c.find(".tabs").not(".print-tabs").find("a").click(function(e){e.preventDefault();
c.find(".tabs").not(".print-tabs").find("a").removeClass("active");b(this).addClass("active");c.find(".tab-content").removeClass("tab-content--open");c.find(b(this).attr("href")).addClass("tab-content--open");a.refreshLayout()})}c.find(".tabs").not(".print-tabs").find("a").each(function(){b(this).removeClass("active");b(this).addClass("isloading");c.find(b(this).attr("href")).removeClass("tab-content--open");b(this).text(a.manager.translator.getLabel(b(this).attr("lab-id")))})},process_show_tabs:function(){var a=
b(this.target),c=0;a.find(".tabs").not(".print-tabs").find("a").each(function(){var e=a.find(b(this).attr("href"));b(this).hasClass("dontshow")||0==e.find(".data-pair").length&&0==e.find(".matrix-tile").length&&0==e.find(".copy").length?b(this).hide():(b(this).show(),0==c&&(b(this).addClass("active"),a.find(b(this).attr("href")).addClass("tab-content--open"),smkCommon.debugLog()&&console.log("process_show_tabs "+a.find(b(this).attr("href"))[0].outerHTML.substring(0,50)),c++),b(this).hasClass("to-print")&&
(e=sprintf('<div class="tabs print-tabs"><a class="active" href="#">%s</a></div>',b(this).text()),a.find(b(this).attr("href")).prepend(e),b(this).hasClass("break")&&a.find(b(this).attr("href")).append('<div class="print-page-break"></div>')))});this.refreshLayout();a.css("visibility","visible")},hideTabs:function(){var a=b(this.target);a.find(".tabs").not(".print-tabs").find("a").each(function(){b(this).removeClass("active");a.find(b(this).attr("href")).removeClass("tab-content--open")});a.css("visibility",
"hidden")},end_tab_process:function(a){b(this.target).find(sprintf("a[href=%s]",a)).removeClass("isloading");0==b(this.target).find(".isloading").length&&(smkCommon.debugLog()&&console.log("teasers_all_images_loaded"),this.process_show_extended_titles(),this.process_show_tabs(),b(this).trigger({type:"smk_search_detail_tabs_loaded"}))},refreshLayout:function(){b(this.target);this.related_subWidget.refreshLayout();this.parts_subWidget.refreshLayout()}})})(jQuery);(function(b){AjaxSolr.OriginalWidget=AjaxSolr.AbstractWidget.extend({afterRequest:function(){var a=b(this.target);if(this.getRefresh()){a.empty();for(var c,e=new getData_Original.constructor(this),d=0,f=this.manager.response.response.docs.length;d<f;d++)c=e.get_data(this.manager.response.response.docs[d]);c=this.template_integration_json(c.info,"#detailOriginalTemplate");a.html(c);b(this).trigger({type:"smk_original_loaded"})}else this.setRefresh(!0)},template_integration_json:function(a,c){return Mustache.to_html(b(this.template).find(c).html(),
a)}})})(jQuery);(function(b){AjaxSolr.TeasersWidget=AjaxSolr.AbstractWidget.extend({constructor:function(a){AjaxSolr.AbstractWidget.__super__.constructor.apply(this,arguments);AjaxSolr.extend(this,{initTemplate:null},a)},start:0,scrollUpdateWidget:null,sub_scrollWidget:null,init:function(){var a=this,c=b(this.target);c.html(b(a.template).find(this.initTemplate).html());c.find(".matrix").masonry({itemSelector:".matrix-tile",columnWidth:".matrix-tile-size"});a.sub_scrollWidget=new AjaxSolr.ScrollWidget({id:"sub_scroll_teasers",
target:a.target,template:a.template});c=parseInt(a.manager.store.get("start").val())+parseInt(a.manager.store.get("rows").val());a.scrollUpdateWidget=new AjaxSolr.ScrollUpdateManagerWidget({id:"scroll_update",scrollManager:a.scrollManager,scroll_subWidget:a.sub_scrollWidget,start_offset:c,mainManager:this.manager});b(a.scrollUpdateWidget).on("smk_search_call_detail",function(c){b(a).trigger({type:"smk_search_call_detail",detail_url:c.detail_url})});b(a.scrollUpdateWidget).on("smk_scroll_all_images_displayed",
function(c){a.refreshLayout();a.scrollUpdateWidget.start_scroll_preload_request(!0)});a.scrollUpdateWidget.init();b(document).ready(function(){b(window).scroll(function(c){a.getRefresh()&&0<b(a.target).offset().top&&a.scrollUpdateWidget.scrollStart(c)})})},afterRequest:function(){var a=b(this.target).find(".matrix");if(this.getRefresh())if(smkCommon.debugTime()&&console.time("Teasers"),0==this.manager.response.response.docs.length)b(this).trigger({type:"smk_teasers_all_images_loaded"});else{var c=
this.getTiles(),a=document.querySelector(a.selector),a=Masonry.data(a);b(a.element).masonryImagesReveal(a,c,b.proxy(this.onComplete,this),this,this.onClickLink)}else this.setRefresh(!0)},beforeRequest:function(){this.scrollUpdateWidget.beforeRequest()},removeAllArticles:function(){var a=b(this.target),c=a.find(".matrix .matrix-tile");0<c.length&&(a.find(".matrix").masonry("remove",c),this.refreshLayout());c.remove()},refreshLayout:function(){b(this.target).find(".matrix").masonry("layout");this.highlightning()},
onComplete:function(){var a=this;b(this.target).find(".matrix-tile").each(function(){var c=b(this);c.find("a").click({detail_url:c.find("a").attr("href"),caller:a},function(c){a.onClickLink(c)});c.find(".artwork-title").click({detail_url:c.find(".artwork-title").attr("href"),caller:a},function(c){a.onClickLink(c)});var e=c.find(".matrix-tile-image").not(".matrix-tile-image-missing");0<e.length&&(e.find("a").mouseenter(function(a){c.find("span.copyright-info").css("opacity",1)}),e.find("a").mouseleave(function(a){c.find("span.copyright-info").css("opacity",
0)}))});a.refreshLayout();b(this).trigger({type:"smk_teasers_all_images_loaded"});a.scrollUpdateWidget.start_scroll_preload_request(!0);return!0},onClickLink:function(a){a.preventDefault();b(a.data.caller).trigger({type:"smk_search_call_detail",detail_url:a.data.detail_url})},getTiles:function(){for(var a=null,c=new getData_Teasers.constructor(this),e=new String,d=0,f=this.manager.response.response.docs.length;d<f;d++){var a=c.getData(this.manager.response.response.docs[d]),a=b(this.template_integration_json({artworks:a},
"#teaserArticleTemplate")),h=a.find(".matrix-tile-image");if(!h.hasClass("matrix-tile-image-missing")){var g=c.getImage(h);h.prepend(b(g));h.find("img").addClass("image-loading")}e+=a[0].outerHTML}return b(e)},template_integration_json:function(a,c){return Mustache.to_html(b(this.template).find(c).html(),a)},highlightning:function(){var a=[].concat(Manager.store.get("q").value);if(void 0!==a&&0<a.length){for(var c=[],e=0,d=a.length;e<d;e++)c=c.concat(a[e].trim().replace("*","").split(" "));b(this.target).find(".matrix-tile-header").highlight(c);
b(this.target).find(".matrix-tile-meta").highlight(c)}}})})(jQuery);(function(b){"function"===typeof define&&define.amd?define(["core/AbstractWidget"],b):b()})(function(){(function(b){AjaxSolr.PagerWidget=AjaxSolr.AbstractWidget.extend({constructor:function(a){AjaxSolr.PagerWidget.__super__.constructor.apply(this,arguments);AjaxSolr.extend(this,{innerWindow:4,outerWindow:1,prevLabel:"&laquo; Previous",nextLabel:"Next &raquo;",separator:" ",currentPage:null,totalPages:null},a)},currentAdd:0,gapMarker:function(){return'<span class="pager-gap">&hellip;</span>'},windowedLinks:function(){var a=
[],c=null;visible=this.visiblePageNumbers();for(var b=0,d=visible.length;b<d;b++)c&&visible[b]>c+1&&a.push(this.gapMarker()),a.push(this.pageLinkOrSpan(visible[b],["pager-current"])),c=visible[b];return a},visiblePageNumbers:function(){var a=this.currentPage-this.innerWindow,c=this.currentPage+this.innerWindow;c>this.totalPages&&(a=Math.max(0,a-(c-this.totalPages)),c=this.totalPages);1>a&&(c=Math.min(this.totalPages,c+(1-a)),a=1);var b=[];b.push(1);for(var d=2;d<=Math.min(1+this.outerWindow,a-1);d++)b.push(d);
1+this.outerWindow==a-2&&b.push(a-1);for(d=Math.max(2,a);d<=Math.min(c,this.totalPages-1);d++)b.push(d);this.totalPages-this.outerWindow==c+2&&b.push(c+1);for(d=Math.max(this.totalPages-this.outerWindow,c+1);d<this.totalPages;d++)b.push(d);1<this.totalPages&&b.push(this.totalPages);return b},pageLinkOrSpan:function(a,c,e){e=e||a;return a&&a!=this.currentPage?b('<a href="#"></a>').html(e).attr("rel",this.relValue(a)).addClass(c[1]).click(this.clickHandler(a)):b("<span></span>").html(e).addClass(c.join(" "))},
clickHandler:function(a){var c=this;return function(){b(c).trigger({type:"smk_search_pager_changed",start:(a-1)*c.perPage()});return!1}},relValue:function(a){switch(a){case this.previousPage():return"prev"+(1==a?"start":"");case this.nextPage():return"next";case 1:return"start";default:return""}},previousPage:function(){return 1<this.currentPage?this.currentPage-1:null},nextPage:function(){return this.currentPage<this.totalPages?this.currentPage+1:null},renderHeader:function(a,c,b){},renderLinks:function(a){if(0==
this.totalPages)b(this.target).html("&nbsp;");else if(this.totalPages){a.unshift(this.pageLinkOrSpan(this.previousPage(),["pager-disabled","pager-prev"],this.prevLabel));a.push(this.pageLinkOrSpan(this.nextPage(),["pager-disabled","pager-next"],this.nextLabel));var c=b(this.target);c.empty();for(var e=0,d=a.length;e<d;e++){var f=b("<li></li>");this.separator&&0<e&&f.append(this.separator);c.append(f.append(a[e]))}}},perPage:function(){return parseInt(this.manager.response.responseHeader&&this.manager.response.responseHeader.params&&
this.manager.response.responseHeader.params.rows||this.manager.store.get("rows").val()||10)},getOffset:function(){return parseInt(this.manager.response.responseHeader&&this.manager.response.responseHeader.params&&this.manager.response.responseHeader.params.start||this.manager.store.get("start").val()||0)},init:function(){b(this.target).html("&nbsp;")},afterRequest:function(){this.getRefresh()?this.refreshDisplay():this.setRefresh(!0)},refreshDisplay:function(a){this.currentAdd=jQuery.isNumeric(a)?
this.currentAdd+parseInt(a):0;a=this.perPage()+this.currentAdd;var c=this.getOffset(),e=parseInt(this.manager.response.response.numFound),c=c-c%a;this.currentPage=Math.ceil((c+1)/a);this.totalPages=Math.ceil(e/a);b(this.target).empty();this.renderLinks(this.windowedLinks());this.renderHeader(a,c,e)}})})(jQuery)});(function(b){AjaxSolr.SearchInfoWidget=AjaxSolr.AbstractWidget.extend({afterRequest:function(){if(this.getRefresh()){var a=parseInt(this.manager.response.response.numFound),c=b(this.target);c.empty();a=this.template_integration_json({results:sprintf("%s %s",a,this.manager.translator.getLabel("pager_results"))},"#searchinfoTemplate");c.html(a)}else this.setRefresh(!0)},template_integration_json:function(a,c){return Mustache.to_html(b(this.template).find(c).html(),a)}})})(jQuery);(function(b){AjaxSolr.ScrollWidget=AjaxSolr.AbstractWidget.extend({afterRequest:function(){var a=b(this.target);if(this.getRefresh())if(0==this.manager.response.response.docs.length)a.find(".image_loading").removeClass("image_loading").hide(),b(this).trigger({type:"smk_scroll_no_more_results"});else{smkCommon.debugLog()&&console.log(sprintf("scroll_request - afterRequest: isPreloading_%s",this.preloading));a=a.find(".matrix");a=document.querySelector(a.selector);a=Masonry.data(a);smkCommon.debugLog()&&
console.log(sprintf(sprintf("scroll_request - afterRequest: scrollTop_%s",b(window).scrollTop())));var c=this.getTiles();smkCommon.debugLog()&&console.log(sprintf("scroll_request - afterRequest: getTiles"));this.setReset(!1);b(a.element).masonryImagesReveal(a,c,b.proxy(this.onAllImagesLoaded,this),this,this.onClickLink,this.preloading);smkCommon.debugLog()&&console.log(sprintf("scroll_request - afterRequest: masonryImagesReveal"))}else this.setRefresh(!0)},isPreloading:function(a){this.preloading=
1==a?!0:!1},setReset:function(a){this.reset=1==a?!0:!1},onAllImagesLoaded:function(){var a=this;b(this.target).find(".matrix-tile.scroll_add").each(function(){var c=b(this);c.find("a").click({detail_url:c.find("a").attr("href"),caller:a},function(c){a.onClickLink(c)});c.find(".artwork-title").click({detail_url:c.find(".artwork-title").attr("href"),caller:a},function(c){a.onClickLink(c)});var e=c.find(".matrix-tile-image").not(".matrix-tile-image-missing");0<e.length&&(e.find("a").mouseenter(function(a){c.find("span.copyright-info").css("opacity",
1)}),e.find("a").mouseleave(function(a){c.find("span.copyright-info").css("opacity",0)}))});smkCommon.debugLog()&&console.log(sprintf("scroll_request - onComplete: isPreloading_%s",this.preloading));b(this).trigger({type:1==this.preloading?"smk_scroll_all_images_preloaded":"smk_scroll_all_images_loaded"});return!0},onClickLink:function(a){a.preventDefault();b(a.data.caller).trigger({type:"smk_search_call_detail",detail_url:a.data.detail_url})},template_integration_json:function(a,c){return Mustache.to_html(b(this.template).find(c).html(),
a)},getTiles:function(){for(var a=null,c=new getData_Teasers.constructor(this),e=new String,d=0,f=this.manager.response.response.docs.length;d<f;d++){a=c.getData(this.manager.response.response.docs[d]);a=b(this.template_integration_json({artworks:a},"#teaserArticleTemplate"));a.addClass("scroll_add");var h=a.find(".matrix-tile-image");if(!h.hasClass("matrix-tile-image-missing")){var g=c.getImage(h);h.prepend(b(g));h.find("img").addClass("image-loading")}e+=a[0].outerHTML}return b(e)},preloading:!1,
reset:!1})})(jQuery);(function(b){AjaxSolr.LanguagePickerWidget=AjaxSolr.AbstractWidget.extend({init:function(){var a=this,c=b(this.target),e=a.template_integration_json({},"#langpickerTemplate");c.html(e);this.set_language();c.find("li.lang").click(function(c){b(this).hasClass("active")||(c.preventDefault(),b(a.target).find(".active").removeClass("active"),b(this).addClass("active"),c=b(this).attr("lang_radio"),b(a).trigger({type:"smk_lang_changed",value:c}));return!1})},beforeRequest:function(){this.set_language()},
set_language:function(){b(this.target).find("li.lang[lang_radio!="+ModelManager.get_lang()+"]").removeClass("active");b(this.target).find("li.lang[lang_radio="+ModelManager.get_lang()+"]").addClass("active")},template_integration_json:function(a,c){return Mustache.to_html(b(this.template).find(c).html(),a)}})})(jQuery);(function(b){AjaxSolr.ScrollUpdateManagerWidget=AjaxSolr.AbstractWidget.extend({constructor:function(a){AjaxSolr.AbstractWidget.__super__.constructor.apply(this,arguments);AjaxSolr.extend(this,{mainManager:null,scroll_subWidget:null,start_offset:0},a)},init:function(){var a=this;this.scrollManager=new AjaxSolr.smkManager({solrUrl:a.mainManager.solrUrl,proxyUrl:a.mainManager.proxyUrl,store:new AjaxSolr.smkParameterStore({exposed:a.mainManager.exposed,start:0,fq_default:a.mainManager.store.fq_default,
q_default:a.mainManager.store.q_default,qf_default:null!=a.mainManager.store.qf_default?a.mainManager.store.qf_default[a.mainManager.store.current_lang]:null,sort_default:a.mainManager.store.sort_default,scroll_rows_default:a.mainManager.store.scroll_rows_default,current_lang:a.mainManager.store.current_lang}),allWidgetsProcessed:a.mainManager.allWidgetsProcessedBound,generalSolrError:a.mainManager.generalSolrErrorProcessedBound,translator:a.mainManager.translator,id:"scrollManager_"+a.scroll_subWidget.target});
var c={q:this.scrollManager.store.q_default,fq:this.scrollManager.store.fq_default,defType:"edismax",start:a.start_offset-a.scrollManager.store.scroll_rows_default+1,"json.nl":"map"},e;for(e in c)a.scrollManager.store.addByValue(e,c[e]);a.scrollManager.store.save(!0);a.scrollManager.addWidget(this.scroll_subWidget);b(a.scroll_subWidget).on("smk_scroll_all_images_loaded",function(c){smkCommon.debugLog()&&console.log(sprintf("end_scroll_request - smk_scroll_all_images_loaded: isRequestRunning_%s - isPreloading_%s",
a.isRequestRunning,a.isPreloading));a.all_img_displayed()});b(a.scroll_subWidget).on("smk_scroll_all_images_preloaded",function(c){smkCommon.debugLog()&&console.log(sprintf("end_preload_request - smk_scroll_all_images_preloaded: isRequestRunning_%s - isPreloading_%s",a.isRequestRunning,a.isPreloading));a.all_img_preloaded()});b(a.scroll_subWidget).on("smk_scroll_no_more_results",function(c){a.show_infinite_scroll_spin("end");a.isRequestRunning=!1;a.noMoreResults=!0;b(a).trigger({type:"smk_scroll_no_more_results"})});
b(a.scroll_subWidget).on("smk_search_call_detail",function(c){b(a).trigger({type:"smk_search_call_detail",detail_url:c.detail_url})});this.scrollSpin=new Spinner(this.scrollSpinopts);this.nber_rows_to_preload=30*this.scrollManager.store.scroll_rows_default;this.nber_rows_to_load=5*this.scrollManager.store.scroll_rows_default},beforeRequest:function(){this.reset()},start_scroll_preload_request:function(a){b(this.scroll_subWidget.target).find(".preloaded").length<this.nber_rows_to_preload/1.2&&!this.isRequestRunning&&
!this.noMoreResults&&this.load_scroll_pictures(!0,a)},reset:function(){this.scrollManager.store.addByValue("start",this.start_offset-this.scrollManager.store.scroll_rows_default+1);this.scrollManager.store.remove("fq");this.scrollManager.store.addByValue("fq",this.scrollManager.store.fq_default);this.isPreloading=this.noMoreResults=this.isRequestRunning=!1;this.scroll_subWidget.isPreloading(!1);this.scroll_subWidget.setReset(!0)},all_img_displayed:function(){0==b(this.scroll_subWidget.target).find(".image_loading").length&&
(b(this.scroll_subWidget.target).find(".matrix-tile.scroll_add").removeClass("scroll_add"),this.show_infinite_scroll_spin("false"),this.isRequestRunning=!1,this.onFinishLoaded(this.scrollManager.store.scroll_rows_default))},all_img_preloaded:function(){0==b(this.scroll_subWidget.target).find(".image_loading").length&&(b(this.scroll_subWidget.target).find(".matrix-tile.scroll_add").removeClass("scroll_add"),this.show_infinite_scroll_spin("false"),this.isPreloading=this.isRequestRunning=!1,this.scroll_subWidget.isPreloading(!1))},
onFinishLoaded:function(a){b(this).trigger({type:"smk_scroll_all_images_displayed",added:a});return!0},scrollStart:function(a){var c=b(window).scrollTop();0==b(".generalspinner").length&&c>this.lastScrollTop&&!b(a.target).hasClass("active-result")&&this.start_scroll_request();this.lastScrollTop=c},start_scroll_request:function(){var a=0;if(0<b(this.scroll_subWidget.target).find(".preloaded").length){if(b(this.scroll_subWidget.target).find(".preloaded").each(function(){smkCommon.isElemIntoView(this)&&
(b(this).removeClass("preloaded").show(),smkCommon.debugLog()&&console.log(sprintf("start_scroll_request - remove preloaded: %s",b(this).attr("id"))),a++)}),0<a)this.onFinishLoaded(a)}else this.isRequestRunning||this.noMoreResults||!this.trigger_req()||this.load_scroll_pictures(!1,!0)},load_scroll_pictures:function(a,c){var e,d,f,h,g,k,l;e=this.mainManager.store.values("q");d=b(this.scroll_subWidget.target).find(".matrix-tile").length;f=smkCommon.isValidDataText(this.mainManager.store.values("sort"))?
this.mainManager.store.values("sort"):this.scrollManager.store.sort_default;h=a?this.nber_rows_to_preload:this.nber_rows_to_load;g=this.mainManager.store.values("qf");k=this.mainManager.store.values("fl");l=this.mainManager.store.values("fq");this.scrollManager.store.addByValue("q",e);this.scrollManager.store.addByValue("start",d);this.scrollManager.store.addByValue("sort",f);this.scrollManager.store.addByValue("rows",h);this.scrollManager.store.addByValue("qf",g);this.scrollManager.store.addByValue("fl",
k);this.scrollManager.store.addByValue("fq",l);this.isRequestRunning=!0;this.isPreloading=a;this.scroll_subWidget.isPreloading(a);smkCommon.debugLog()&&console.log(sprintf("start_scroll_request - doRequest: start_%s, rows_%s, isRequestRunning_%s - isPreloading_%s",d,h,this.isRequestRunning,this.isPreloading));this.scrollManager.doRequest();c&&this.show_infinite_scroll_spin("true")},trigger_req:function(){var a=b(window).height()+b(window).scrollTop()+200;return b(".matrix").height()<=a},show_infinite_scroll_spin:function(a){switch(a){case "true":a=
document.getElementById(this.scroll_subWidget.target.replace("#",""));this.scrollSpin.spin(a);b(this.scroll_subWidget.target).find(".scrollspinner").css("position","fixed");break;default:this.scrollSpin.stop()}},scrollManager:null,isRequestRunning:!1,noMoreResults:!1,scrollSpin:null,isPreloading:!1,nber_rows_to_preload:0,nber_rows_to_load:0,lastScrollTop:0,scrollSpinopts:{lines:11,length:9,width:3,radius:10,corners:1,rotate:0,direction:1,color:"#000",speed:.8,trail:68,shadow:!1,hwaccel:!1,className:"scrollspinner",
zIndex:2E9,top:"95%",left:"57%"}})})(jQuery);(function(b){"function"===typeof define&&define.amd?define(["core/AbstractWidget","core/Parameter"],b):b()})(function(){AjaxSolr.AbstractFacetWidget=AjaxSolr.AbstractWidget.extend({constructor:function(b){AjaxSolr.AbstractFacetWidget.__super__.constructor.apply(this,arguments);AjaxSolr.extend(this,{start:0,field:null,multivalue:!0},b)},init:function(){this.initStore()},initStore:function(){var b="facet.prefix facet.sort facet.limit facet.offset facet.mincount facet.missing facet.method facet.enum.cache.minDf".split(" ");
this.manager.store.addByValue("facet",!0);void 0!==this["facet.field"]?this.manager.store.addByValue("facet.field",this.field):void 0!==this["facet.date"]?(this.manager.store.addByValue("facet.date",this.field),b=b.concat("facet.date.start facet.date.end facet.date.gap facet.date.hardend facet.date.other facet.date.include".split(" "))):void 0!==this["facet.range"]&&(this.manager.store.addByValue("facet.range",this.field),b=b.concat("facet.range.start facet.range.end facet.range.gap facet.range.hardend facet.range.other facet.range.include".split(" ")));
for(var a=0,c=b.length;a<c;a++)void 0!==this[b[a]]&&this.manager.store.addByValue("f."+this.field+"."+b[a],this[b[a]])},isEmpty:function(){return!this.manager.store.find("fq",new RegExp("^-?"+this.field+":"))},set:function(b){return this.changeSelection(function(){var a=this.manager.store.removeByValue("fq",new RegExp("^-?"+this.field+":")),c=this.manager.store.addByValue("fq",this.fq(b));return a||c})},add:function(b){return this.changeSelection(function(){return this.manager.store.addByValue("fq",
this.fq(b))})},remove:function(b){return this.changeSelection(function(){return this.manager.store.removeByValue("fq",this.fq(b))})},clear:function(){return this.changeSelection(function(){return this.manager.store.removeByValue("fq",new RegExp("^-?"+this.field+":"))})},changeSelection:function(b){(changed=b.apply(this))&&this.afterChangeSelection();return changed},afterChangeSelection:function(){},getFacetCounts:function(){var b;void 0!==this["facet.field"]?b="facet_fields":void 0!==this["facet.date"]?
b="facet_dates":void 0!==this["facet.range"]&&(b="facet_ranges");if(void 0!==b)switch(this.manager.store.get("json.nl").val()){case "map":return this.getFacetCountsMap(b);case "arrarr":return this.getFacetCountsArrarr(b);default:return this.getFacetCountsFlat(b)}throw'Cannot get facet counts unless one of the following properties is set to "true" on widget "'+this.id+'": "facet.field", "facet.date", or "facet.range".';},getFacetCountsMap:function(b){var a=[],c;for(c in this.manager.response.facet_counts[b][this.field])a.push({facet:c,
count:parseInt(this.manager.response.facet_counts[b][this.field][c])});return a},getFacetCountsArrarr:function(b){for(var a=[],c=0,e=this.manager.response.facet_counts[b][this.field].length;c<e;c++)a.push({facet:this.manager.response.facet_counts[b][this.field][c][0],count:parseInt(this.manager.response.facet_counts[b][this.field][c][1])});return a},getFacetCountsFlat:function(b){for(var a=[],c=0,e=this.manager.response.facet_counts[b][this.field].length;c<e;c+=2)a.push({facet:this.manager.response.facet_counts[b][this.field][c],
count:parseInt(this.manager.response.facet_counts[b][this.field][c+1])});return a},clickHandler:function(b){var a=this,c=this.multivalue?"add":"set";return function(){a[c].call(a,b)&&a.doRequest();return!1}},unclickHandler:function(b){var a=this;return function(){a.remove(b)&&a.doRequest();return!1}},fq:function(b,a){return(a?"-":"")+this.field+":"+AjaxSolr.Parameter.escapeValue(b)}})});(function(b){AjaxSolr.SearchFiltersWidget=AjaxSolr.AbstractFacetWidget.extend({previous_values:{},init:function(){var a=b(this.target),c=this.manager.translator.getLabel("tagcloud_"+this.field),c={options:Array({title:c,target_drop_id:this.target.replace("#","")+"_drop",search_lab:this.manager.translator.getLabel(sprintf("search_%s_lab",this.field)),values:[{value:"value",text:""}]})},c=this.template_integration_json(c,"#chosenTemplate");a.html(c);this.previous_values[this.field]=[];a.find("select").chosen({disable_search_threshold:10,
no_results_text:this.manager.translator.getLabel("search_no_results"),width:"100%",disable_search:!0,allow_single_deselect:!0})},beforeRequest:function(){var a=b(this.target),c=b(this.target).find("select");this.getRefresh()&&(c.chosen("destroy"),a.find("label").text(this.manager.translator.getLabel("tagcloud_"+this.field)),c.attr("data-placeholder",this.manager.translator.getLabel("search_data_loading")),this.update_filters(),this.refreshChosen(c))},update_filters:function(){var a=ModelManager.get_facets_lab_for_search_component();
if(void 0!==a)for(var c=0,b=a.length;c<b;c++)a[c].id==this.field&&this.storeSelectedFilter(a[c])},process_filter:function(){var a=this,c=b(this.target),e=b(this.target).find("select"),d=a.manager.translator.getLabel("tagcloud_"+this.field);if(a.getRefresh()){if(smkCommon.debugTime()&&console.time("SearchFilters - "+this.field),smkCommon.debugTime()&&console.time("SearchFilters - "+this.field+" - process"),void 0!==a.manager.response.facet_counts.facet_fields[a.field]||void 0!==a.manager.response.facet_counts.facet_ranges[a.field]){var f=
0,h=0,g=0,k=[];switch(a.field){case "acq_date_earliest":break;case "object_production_date_earliest":for(var l in a.manager.response.facet_counts.facet_ranges[a.field].counts)if(smkCommon.isValidDataText(l)){h=parseInt(a.manager.response.facet_counts.facet_ranges[a.field].counts[l]);h>f&&(f=h);var q=new Date(l);k.push({value:a.formatRequest(sprintf("[%1$s TO %1$s+100YEARS]",l),!1),text:this.getCentury(q.getFullYear()),count:h,i:g});g++}if(void 0!==a.manager.response.facet_counts.facet_ranges[a.field].before&&
0<a.manager.response.facet_counts.facet_ranges[a.field].before){var h=a.manager.response.facet_counts.facet_ranges[a.field].before,f=a.manager.response.facet_counts.facet_ranges[a.field].start,q=new Date(f),p=sprintf("%s %s",a.manager.translator.getLabel("search_filter_before"),this.getCentury(q.getFullYear()));k.push({value:a.formatRequest(sprintf("[* TO %s]",f)),text:p,count:h,i:g});g++}h=g;k.sort(function(a,c){return parseInt(c.text)-parseInt(a.text)});break;case "artist_natio_en":case "artist_natio_dk":case "object_type_dk":case "object_type_en":for(l in a.manager.response.facet_counts.facet_fields[a.field])smkCommon.isValidDataText(l)&&
(h=parseInt(a.manager.response.facet_counts.facet_fields[a.field][l]),h>f&&(f=h),smkCommon.isValidDataText(l)&&(k.push({value:a.formatRequest(l,!0),text:smkCommon.firstCapital(l).trim(),count:h,i:g}),g++));h=g;k.sort(function(c,b){return"dk"==a.manager.translator.getLanguage()?typeof("string"===c.value)&&typeof("string"===b.value)?c.value.trim()<b.value.trim()?-1:1:c.value<b.value?-1:1:typeof("string"===c.text)&&typeof("string"===b.text)?c.text.trim()<b.text.trim()?-1:1:c.text<b.text?-1:1});break;
case "artist_surname_firstname":for(l in a.manager.response.facet_counts.facet_fields[a.field])smkCommon.isValidDataText(l)&&(h=parseInt(a.manager.response.facet_counts.facet_fields[a.field][l]),h>f&&(f=h),smkCommon.isValidDataText(l)&&(k.push({value:a.formatRequest(l,!0),text:smkCommon.firstCapital(l).trim(),count:h,i:g}),g++));h=g;k.sort(function(a,c){return typeof("string"===a.text)&&typeof("string"===c.text)?a.text.trim()<c.text.trim()?-1:1:a.text<c.text?-1:1});break;case "object_type_main_dk":case "object_type_main_en":q=
{};for(l in a.manager.response.facet_counts.facet_fields[a.field])if(smkCommon.isValidDataText(l)){h=parseInt(a.manager.response.facet_counts.facet_fields[a.field][l]);h>f&&(f=h);for(var y=a.manager.translator.getLabel("arttype_hierarchi"),h=a.getParentType(y,l.trim()),D=null!=h&&void 0!==h.id?h.id:l.trim();null!=h&&void 0!==h.id;)D=h.id,h=a.getParentType(y,h.id.trim());void 0===q[D]&&(q[D]=!0)}b.each(q,function(c,b){var e=a.getNodeValue(y,c.trim()),d=[a.formatRequest(c,!0)];jQuery.merge(d,a.getSubRequestFromNode({value:e}));
smkCommon.isValidDataText(c)&&(k.push({value:d.join(" OR "),text:smkCommon.firstCapital(c).trim(),i:g}),g++)});h=g;k.sort(function(c,b){return"dk"==a.manager.translator.getLanguage()?typeof("string"===c.value)&&typeof("string"===b.value)?c.value.trim()<b.value.trim()?-1:1:c.value<b.value?-1:1:typeof("string"===c.text)&&typeof("string"===b.text)?c.text.trim()<b.text.trim()?-1:1:c.text<b.text?-1:1});break;case "artist_auth":for(l in a.manager.response.facet_counts.facet_fields[a.field])p="",index=0,
smkCommon.isValidDataText(l)&&(h=parseInt(a.manager.response.facet_counts.facet_fields[a.field][l]),h>f&&(f=h),b.each(getData_Common.enumProducent,function(c,b){if(l==b)return p=smkCommon.firstCapital(a.manager.translator.getLabel("detail_producent_"+c)),!1;index++}),k.push({value:a.formatRequest(l,!0),text:p,count:h,i:g,index:index}),g++);h=g;k.sort(function(a,c){return a.index<c.index?-1:1});break;case "department":for(l in a.manager.response.facet_counts.facet_fields[a.field])smkCommon.isValidDataText(l)&&
(h=parseInt(a.manager.response.facet_counts.facet_fields[a.field][l]),h>f&&(f=h),b.each(getData_Common.enumDepartment,function(c,b){if(-1<l.indexOf(b))return p=smkCommon.firstCapital(a.manager.translator.getLabel("search_"+c+"_lab")),!1;index++}),smkCommon.isValidDataText(p)&&k.push({value:a.formatRequest(l,!0),text:p,count:h,i:g}),g++);h=g;k.sort(function(a,c){return typeof("string"===a.value)&&typeof("string"===c.value)?a.value.trim()<c.value.trim()?-1:1:a.value<c.value?-1:1});break;case "materiale":case "materiale_en":for(l in a.manager.response.facet_counts.facet_fields[a.field])smkCommon.isValidDataText(l)&&
(h=parseInt(a.manager.response.facet_counts.facet_fields[a.field][l]),h>f&&(f=h),q=l.split(smkCommon.split_2_niv),p=smkCommon.isValidDataText(smkCommon.getValueFromSplit(q,0))?smkCommon.firstCapital(smkCommon.getValueFromSplit(q,0).trim()):"",k.push({value:a.formatRequest(l,!0),text:p,count:h,i:g}),g++);h=g;k.sort(function(a,c){return typeof("string"===a.value)&&typeof("string"===c.value)?a.value.trim()<c.value.trim()?-1:1:a.value<c.value?-1:1});break;default:for(l in a.manager.response.facet_counts.facet_fields[a.field])smkCommon.isValidDataText(l)&&
(h=parseInt(a.manager.response.facet_counts.facet_fields[a.field][l]),h>f&&(f=h),k.push({value:a.formatRequest(l,!0),text:smkCommon.firstCapital(l).trim(),count:h,i:g}),g++);h=g;k.sort(function(a,c){return typeof("string"===a.value)&&typeof("string"===c.value)?a.value.trim()<c.value.trim()?-1:1:a.value<c.value?-1:1})}d={options:Array({title:d,totalCount:h,values:k})};d=a.template_integration_json(d,"#chosenTemplate");smkCommon.debugTime()&&console.timeEnd("SearchFilters - "+this.field+" - process");
smkCommon.debugTime()&&console.time("SearchFilters - "+this.field+" - chosen");e.empty();e.append(b(d).find("option"));if(0<a.previous_values[a.field].length){if(0==k.length){g=0;for(d=a.previous_values[a.field].length;g<d;g++)l=a.previous_values[a.field][g],k.push({value:l.value,text:smkCommon.firstCapital(l.text),count:"0"});d={options:Array({title:this.title,values:k})};d=a.template_integration_json(d,"#chosenTemplate");e.append(b(d).find("option"))}f=[];g=0;for(d=a.previous_values[a.field].length;g<
d;g++)f.push(a.previous_values[a.field][g].value);b(this.target).find("select").val(f)}c.find("select").change(a.clickHandler());0==k.length?(e.attr("data-placeholder",a.manager.translator.getLabel(sprintf("search_disab_lab",this.field))),e.prop("disabled",!0)):(e.attr("data-placeholder",a.manager.translator.getLabel(sprintf("search_%s_lab",this.field))),e.prop("disabled",!1));smkCommon.debugTime()&&console.time("SearchFilters - "+this.field+" - chosen - update");a.refreshChosen(e);smkCommon.debugTime()&&
console.timeEnd("SearchFilters - "+this.field+" - chosen - update");smkCommon.debugTime()&&console.time("SearchFilters - "+this.field+" - chosen - show");smkCommon.debugTime()&&console.timeEnd("SearchFilters - "+this.field+" - chosen - show");a.previous_values[a.field]=[];smkCommon.debugTime()&&console.timeEnd("SearchFilters - "+this.field+" - chosen");smkCommon.debugTime()&&console.timeEnd("SearchFilters - "+this.field);b(this).trigger({type:"smk_search_filter_loaded"})}}else a.setRefresh(!0)},getCentury:function(a){a=
parseInt(a);var c="",b=this.manager.translator.getLabel("search_filter_cent");switch(this.manager.translator.getLanguage()){case "dk":c="-";break;case "en":for(;21<a;)a/=10;a++;c=smkCommon.ordinal_suffix(a)}return sprintf("%s%s%s",a,c,b)},clickHandler:function(){var a=this;return function(c,e){c.stopImmediatePropagation();b(a).trigger({type:"smk_search_filter_changed",params:e});return!1}},template_integration_json:function(a,c){return Mustache.to_html(b(this.template).find(c).html(),a)},storeSelectedFilter:function(a){a.text.replace(/^"|"$/g,
"");this.previous_values[a.id].push(a)},removeAllSelectedFilters:function(){var a=b(this.target).find("select");a.find("option:selected").each(function(){b(this).removeAttr("selected")});this.refreshChosen(a);this.previous_values[this.field]=[]},refreshChosen:function(a){a.chosen({disable_search_threshold:10,no_results_text:this.manager.translator.getLabel("search_no_results"),width:"100%",disable_search:!0,allow_single_deselect:!0});a.trigger("chosen:updated")},getParentType:function(a,c){var b,
d;if(!a||!a.value)return null;if("[object Array]"===Object.prototype.toString.call(a.value)){for(b in a.value){if(a.value[b].id===c)return a;if(d=this.getParentType(a.value[b],c))return d}return null}return a.value.id===c?a:this.getParentType(a.value,c)},getNodeValue:function(a,c){var b,d;if(!a||!a.value)return!1;for(b in a.value){d=a.value[b];if(d.id==c)return d.value;if(void 0!==d.value&&jQuery.isArray(d.value)&&(d=this.getNodeValue({value:d.value},c)))return d}return!1},getSubRequestFromNode:function(a){var c,
b=[];if(!a||!a.value)return!1;for(c in a.value){var d=a.value[c];void 0===d.value?b.push(this.formatRequest(d.id)):(d=this.getSubRequestFromNode({value:d.value}))&&jQuery.merge(b,d)}return b},formatRequest:function(a,c){c&&-1<a.indexOf(" ")&&(a=sprintf('"%s"',a));return sprintf("%s:%s",this.field,a)}})})(jQuery);(function(b){AjaxSolr.AdvancedSearchWidget=AjaxSolr.AbstractFacetWidget.extend({constructor:function(a){AjaxSolr.AbstractWidget.__super__.constructor.apply(this,arguments);AjaxSolr.extend(this,{facets_list:null},a)},panel_data:null,init:function(){this.panel_data=(new getData_Advanced.constructor(this)).getData(this.facets_list);var a=this.template_integration_json({list:this.panel_data},"#advancedSearchTemplate");b(this.target).html(a);b(this.target).find(".advanced-search-panel-show-hide a").click(function(a){a.preventDefault();
a=b(".advanced-search-panel").height();b(".advanced-search-panel").height(a+"px");b(".advanced-search-panel").hasClass("advanced-search-panel-hidden")||b(".advanced-search-panel").attr("data-height",a);b(".advanced-search-panel").hasClass("advanced-search-panel-hidden")?(b(".advanced-search-panel").height(b(".advanced-search-panel").attr("data-height")),b(".advanced-search-panel-show-hide a").text(b(".advanced-search-panel-show-hide a").attr("data-label-close")),setTimeout(function(){b(".advanced-search-panel").height("auto")},
200)):(b(".advanced-search-panel").height("1px"),b(".advanced-search-panel-show-hide a").text(b(".advanced-search-panel-show-hide a").attr("data-label-open")));b(".advanced-search-panel").toggleClass("advanced-search-panel-hidden")})},beforeRequest:function(){var a=this,c=0;b(a.target).find(".filter-group h3").each(function(){void 0!==a.panel_data.filters[c]&&b(this).html(a.manager.translator.getLabel(a.panel_data.filters[c].lab_tag));c++});var e=this.manager.translator.getLabel("advanced_search_panel_show"),
d=this.manager.translator.getLabel("advanced_search_panel_hide"),f=0<b(a.target).find(".advanced-search-panel-hidden").lenght?d:e;b(a.target).find(".advanced-search-panel-show-hide a").attr("data-label-open",e).attr("data-label-close",d).text(f)},template_integration_json:function(a,c){return Mustache.to_html(b(this.template).find(c).html(),a)}})})(jQuery);(function(b){AjaxSolr.CurrentSearchWidget=AjaxSolr.AbstractWidget.extend({start:0,q:[],afterRequest:function(){var a=[];if(this.getRefresh()){for(var c=0,e=this.q.length;c<e;c++)void 0===this.q[c].text?a.push({q:this.q[c].value}):a.push({q:this.q[c].value,label:this.q[c].text});b(this.target).empty();a.length&&(a=this.template_integration_json({current:a},"#currentItemsTemplate"),b(this.target).html(a),b(this.target).find("a").click(this.removeClickedFacet()))}else this.setRefresh(!0)},removeClickedFacet:function(){var a=
this;return function(c){c=b(this).attr("q");b(a).trigger({type:"smk_search_remove_one_search_string",facet:c,current_q:a.q});return!1}},template_integration_json:function(a,c){return Mustache.to_html(b(this.template).find(c).html(),a)},add_q:function(a,c){this.q.push({value:a,text:c})},set_q:function(a){this.q=a},removeAllCurrentSearch:function(){for(var a=this.q.slice(),c=0,b=a.length;c<b;c++)this.removeFacet(a[c].value);this.q=[]},removeFacet:function(a){for(var c=0,b=this.q.length;c<b;c++)if(this.q[c].value==
a){this.q.splice(c,1);break}}})})(jQuery);(function(b){AjaxSolr.CheckBoxWidget=AjaxSolr.AbstractFacetWidget.extend({init:function(){var a=this,c=b(this.target),e=a.template_integration_json({hasimage:this.manager.translator.getLabel("checkbox_hasimage")},"#checkboxTemplate");c.html(e);c.find("#has-image").click(function(){var c={};this.checked?c.selected=sprintf("%s:[* TO *]",a.field):c.deselected=sprintf("%s:[* TO *]",a.field);b(a).trigger({type:"hasimage",params:c})})},beforeRequest:function(){b(this.target).find("label").html("<i></i>"+
smkCommon.firstCapital(this.manager.translator.getLabel("checkbox_hasimage")));b(this.target).find("input").prop("checked",ModelManager.get_hasimage())},template_integration_json:function(a,c){return Mustache.to_html(b(this.template).find(c).html(),a)}})})(jQuery);(function(b){AjaxSolr.DateRangeWidget=AjaxSolr.AbstractFacetWidget.extend({beforeRequest:function(){var a=this,c=b(this.target),e=a.template_integration_json({label:this.manager.translator.getLabel("daterange_label"),from:smkCommon.firstCapital(this.manager.translator.getLabel("daterange_from")),to:smkCommon.firstCapital(this.manager.translator.getLabel("daterange_to")),show:smkCommon.firstCapital(this.manager.translator.getLabel("daterange_show"))},"#daterangeTemplate");c.html(e);b(a.target).find("form").submit(function(c){c.preventDefault();
b(a).trigger({type:"smk_search_filter_changed",params:{date_range:a.format_request(a)}})});this.update_filters()},update_filters:function(){var a=this,c=ModelManager.get_facets_lab_for_search_component();if(void 0!==c)for(var e=0,d=c.length;e<d;e++)b.each(a.field,function(d,h){if(c[e].id==h){var g=c[e].text.match(/\[(.*)-01-01T00:00:00.001Z TO/);smkCommon.isValidDataText(g)&&b(a.target).find("[name="+d+"]").val(g[1]);g=c[e].text.match(/TO (.*)-01-01T00:00:00.001Z\]/);smkCommon.isValidDataText(g)&&
b(a.target).find("[name="+d+"]").val(g[1])}})},template_integration_json:function(a,c){return Mustache.to_html(b(this.template).find(c).html(),a)},format_request:function(a){var c={},e=sprintf("%s:[* TO %%s]",a.field.max),d=sprintf("%s:[%%s TO *]",a.field.min),f=b(a.target).find("[name=max]").val(),f=smkCommon.isValidDataText(f)?sprintf(e,sprintf("%s-01-01T00:00:00.001Z",f)):null;c[a.field.max]=f;e=b(a.target).find("[name=min]").val();e=smkCommon.isValidDataText(e)?sprintf(d,sprintf("%s-01-01T00:00:00.001Z",
e)):null;c[a.field.min]=e;return c}})})(jQuery);(function(b,a){if("object"===typeof exports&&exports)a(exports);else{var c={};a(c);"function"===typeof define&&define.amd?define(c):b.EventsManager=c}})(this,function(b){b.constructor=function(){this.allWidgetProcessed=!1;this.init=function(){var a=this;$(window).scrollTop(0);$.address.strict(!1);$(document).ready(function(){$.address.externalChange(function(c){a.addressChange(c)})})};this.addressChange=function(a){Manager.requestAbort();$.taskQueue.clear();smkCommon.debugTime()&&console.time("adresschanged");
smkCommon.debugTime()&&console.time("adresschanged-process view");ViewManager.start_modal_loading();$(window).scrollTop(0);ModelManager.setModel(a.value,"url");a=ModelManager.getModel();void 0!==a.view?ViewManager.viewChanged({view:a.view}):ViewManager.viewChanged({view:"teasers"});ViewManager.beforeRequest();Manager.translator.setLanguage(a.lang);Manager.store.set_current_lang(a.lang);smkCommon.debugTime()&&console.timeEnd("adresschanged-process view");smkCommon.debugTime()&&console.time("adresschanged-process view_cate");
void 0!==a.category?"detail"!=a.view&&ViewManager.categoryChanged({category:a.category}):void 0==a.category&&"detail"!=a.view&&ViewManager.categoryChanged({category:"all"});smkCommon.debugTime()&&console.timeEnd("adresschanged-process view_cate");smkCommon.debugTime()&&console.time("adresschanged-process_q");Manager.store.exposedReset();var c=[];"detail"!=a.view?c=void 0!==a.q?c.concat(a.q):Manager.store.q_default:void 0!==a.q&&(c=sprintf('id:"%s"',a.q));Manager.store.addByValue("q",c);Manager.store.remove("facet");
Manager.store.remove("facet.field");"detail"!=a.view&&(Manager.store.addByValue("facet",!0),$.each(Manager.store.facets_default,function(a,c){var b=[],e=[];$.each(c.values,function(a,c){if(void 0===c.ranges)b.push(c.id);else{var d=c.ranges,f=sprintf("f.%s.facet.range.",d.range);e.push({id:"facet.range",value:d.range});e.push({id:f+"start",value:d.start});e.push({id:f+"end",value:d.end});e.push({id:f+"gap",value:d.gap});void 0!==d.other&&e.push({id:f+"other",value:d.other})}});0<b.length&&Manager.store.addByValue("facet.field",
b);if(0<e.length)for(var k=0,l=e.length;k<l;k++)Manager.store.addByValue(e[k].id,e[k].value)}));"detail"!=a.view&&Manager.store.addByValue("fq",Manager.store.fq_default);if(void 0!==a.fq&&AjaxSolr.isArray(a.fq))for(var c=0,b=a.fq.length;c<b;c++)Manager.store.addByValue("fq",a.fq[c].value,a.fq[c].locals);if(void 0!==a.auto&&AjaxSolr.isArray(a.auto))for(c=0,b=a.auto.length;c<b;c++)Manager.store.addByValue("fq",a.auto[c].value,a.auto[c].locals);"detail"!=a.view&&Manager.store.addByValue("qf",Manager.store.get_qf_string());
void 0!==a.sort?Manager.store.addByValue("sort",a.sort):Manager.store.addByValue("sort",Manager.store.sort_default);void 0!==a.start?Manager.store.addByValue("start",a.start):Manager.store.addByValue("start",0);"detail"==a.view?Manager.store.addByValue("fl",Manager.store.fl_options.detail):Manager.store.addByValue("fl",Manager.store.fl_options.list);smkCommon.debugTime()&&console.timeEnd("adresschanged-process_q");smkCommon.debugLog()&&console.log(sprintf("adresschanged - request: %s",a.q));Manager.doRequest();
smkCommon.debugTime()&&console.timeEnd("adresschanged");smkCommon.debugTime()&&console.timeEnd("smk_search_q_added")};this.smk_search_call_detail=function(a){1==a.samewin?ModelManager.update(a.detail_url,"url"):window.open(a.detail_url)};this.smk_search_q_added=function(a){smkCommon.debugTime()&&console.time("smk_search_q_added");a=jQuery.trim(a.val);var c="detail"==ModelManager.get_view(),b={};b.q=[a];b.sort=ModelManager.current_value_joker;b.view=c?"teasers":ModelManager.current_value_joker;b.category=
c?"all":ModelManager.current_value_joker;b.lang=ModelManager.current_value_joker;c||(b.fq=ModelManager.current_value_joker);ModelManager.update(b)};this.smk_search_remove_one_search_string=function(a){Manager.store.removeElementFrom_q(a.facet);a=Manager.store.get("q").value;var c={};c.q=a;c.fq=ModelManager.current_value_joker;c.sort=ModelManager.current_value_joker;c.view=ModelManager.current_value_joker;c.category=ModelManager.current_value_joker;c.lang=ModelManager.current_value_joker;ModelManager.update(c)};
this.smk_search_filter_changed=function(a,c){var b=!1,d=ModelManager.get_fq();void 0!==c.selected?(d.push(new AjaxSolr.Parameter({name:"fq",value:c.selected})),b=!0):void 0!==c.deselected?(d=jQuery.grep(d,function(a){return a.value!=c.deselected}),b=!0):void 0!==c.auto?b=!0:void 0!==c.date_range&&($.each(c.date_range,function(a,c){d=jQuery.grep(d,function(c){return-1==c.value.indexOf(a)});smkCommon.isValidDataText(c)&&d.push(new AjaxSolr.Parameter({name:"fq",value:c}))}),b=!0);b&&(b={},b.fq=void 0!==
c.date_range||void 0!==c.selected||void 0!==c.deselected?d:ModelManager.current_value_joker,b.auto=void 0!==c.auto?[new AjaxSolr.Parameter({name:"fq",value:c.auto})]:ModelManager.current_value_joker,b.q=void 0===c.auto?ModelManager.current_value_joker:null,b.sort=ModelManager.current_value_joker,b.view="teasers",b.category="all",b.lang=ModelManager.current_value_joker,ModelManager.update(b))};this.smk_search_sorter_changed=function(a,c){if(void 0!=a){for(var b=0,d=c.length;b<d;b++)ViewManager.callWidgetFn("adv_"+
c[b],"setRefresh",{params:[!1]});b={};b.sort=a;b.q=ModelManager.current_value_joker;b.fq=ModelManager.current_value_joker;b.view=ModelManager.current_value_joker;b.category=ModelManager.current_value_joker;b.lang=ModelManager.current_value_joker;ModelManager.update(b)}};this.smk_lang_changed=function(a){ModelManager.get_view();var c={};c.lang=a;c.sort=ModelManager.current_value_joker;"detail"==ModelManager.get_view()&&(c.q=ModelManager.current_value_joker);c.view=ModelManager.current_value_joker;
c.category=ModelManager.current_value_joker;ModelManager.update(c)};this.allWidgetsProcessed=function(){this.allWidgetProcessed=!0;0==$(".widget_modal_loading").length&&this.allWidgetsLoaded()};this.wigdetLoaded=function(){0==$(".widget_modal_loading").length&&this.allWidgetProcessed&&this.allWidgetsLoaded()};this.allWidgetsLoaded=function(){this.allWidgetProcessed=!1;smkCommon.debugLog()&&console.log(sprintf(sprintf("Events - allWidgetsLoaded b4 - scrollTop_%s",$(window).scrollTop())));ViewManager.allWidgetsLoaded();
smkCommon.debugLog()&&console.log(sprintf(sprintf("Events - allWidgetsLoaded - scrollTop_%s",$(window).scrollTop())))};this.smk_search_filter_loaded=function(a){ViewManager.remove_modal_loading_from_widget(a);this.wigdetLoaded()};this.smk_teasers_all_images_loaded=function(a){ViewManager.smk_teasers_all_images_loaded();this.wigdetLoaded();for(var c=function(a){$.taskQueue.add(function(){ViewManager.callWidgetFn(a,"process_filter")},this,10)},b=0,d=a.length;b<d;b++)c("adv_"+a[b])};this.smk_detail_this_img_loaded=
function(){ViewManager.smk_detail_this_img_loaded();this.wigdetLoaded();ViewManager.callWidgetFn("details_tabs","process_details_tabs")};this.smk_search_detail_tabs_loaded=function(){ViewManager.smk_search_detail_tabs_loaded();this.wigdetLoaded()}}});(function(b,a){if("object"===typeof exports&&exports)a(exports);else{var c={};a(c);"function"===typeof define&&define.amd?define(c):b.ViewManager=c}})(this,function(b){b.constructor=function(a){this.generalSpin=new Spinner({lines:11,length:20,width:10,radius:29,corners:1,rotate:0,direction:1,color:"#000",speed:.8,trail:68,shadow:!1,hwaccel:!1,className:"generalspinner",zIndex:2E9,top:"50%",left:"50%"});this.options=a||{};this.template=a.template;this.target=a.target;this.init=function(){var a=$(this.target);
a.hide();var b=smkCommon.debugLog()?sprintf("%s - %s",smkCommon.getVersion(),smkCommon.getMode()):null,b=this.template_integration_json(b?{version:b}:null,"#generalTemplate");a.html(b);ModelManager.setModel($.address.value(),"url");b="detail"==ModelManager.getModel().view?"section.section--list":"section.section--detail";a.find(b).hide();a.show()};this.beforeRequest=function(){this.add_modal_loading_to_widget("teasers");this.add_modal_loading_to_widget("details");this.add_modal_loading_to_widget("details_tabs")};
this.template_integration_json=function(a,b){return Mustache.to_html($(this.template).find(b).html(),a)};this.callWidgetFn=function(a,b,d){d=d||{};d=d.params;return void 0===Manager.widgets[a]||"function"!==typeof Manager.widgets[a][b]?(console.log(sprintf("%s - %s not defined",a,b)),!1):Manager.widgets[a][b].apply(Manager.widgets[a],d)};this.callWidgetTarget=function(a,b){return void 0===Manager.widgets[a]||void 0!==b&&void 0===Manager.widgets[a][b]?(console.log(sprintf("target %s/%s not defined",
a,b)),[]):void 0===b?Manager.widgets[a].target:Manager.widgets[a][b].target};this.smk_teasers_all_images_loaded=function(){$(this);this.showWidget($(this.callWidgetTarget("teasers")));this.remove_modal_loading_from_widget(this.callWidgetTarget("teasers"));smkCommon.debugTime()&&console.timeEnd("Teasers")};this.smk_detail_this_img_loaded=function(){this.remove_modal_loading_from_widget(this.callWidgetTarget("details"))};this.smk_search_detail_tabs_loaded=function(){this.remove_modal_loading_from_widget(this.callWidgetTarget("details_tabs"))};
this.viewChanged=function(a){var b=$(this.target);if(void 0!==a.view)switch(this.hideWidgetsNotInCurrentLanguage(smkCommon.getCurrentLanguage()),a.view){case "teasers":b.find("section.section--list").show();b.find("section.section--detail").hide();$(this.callWidgetTarget("details")).empty();this.hideWidget($(this.callWidgetTarget("details")));this.callWidgetFn("details","removeAllRelated");this.showWidget($(this.callWidgetTarget("category")));this.showWidget($(this.callWidgetTarget("sorter")));this.showWidget($(this.callWidgetTarget("teasers")));
this.showWidget(b.find("#search-filters"));break;case "detail":this.callWidgetFn("details_tabs","removeAllRelated"),this.callWidgetFn("details_tabs","removeAllParts"),this.callWidgetFn("details_tabs","hideTabs"),b.find("section.section--list").hide(),b.find("section.section--detail").show(),this.hideWidget(b.find("#search-filters")),this.hideWidget($(this.callWidgetTarget("category"))),this.hideWidget($(this.callWidgetTarget("sorter"))),this.hideWidget($(this.callWidgetTarget("teasers"))),this.showWidget($(this.callWidgetTarget("details")))}};
this.categoryChanged=function(a){var b=$(this.target);void 0!==a.category&&(this.callWidgetFn("teasers","removeAllArticles"),this.showWidget($(this.callWidgetTarget("teasers"))),this.showWidget(b.find("#search-filters")))};this.start_modal_loading=function(){var a=document.getElementById(this.target.replace("#",""));$(this.target).addClass("opaque");this.generalSpin.spin(a)};this.stop_modal_loading=function(){this.generalSpin.stop();$(this.target).removeClass("opaque")};this.add_modal_loading_to_widget=
function(a){this.isThisWidgetActive(a)&&$(this.callWidgetTarget(a)).addClass("widget_modal_loading")};this.remove_modal_loading_from_widget=function(a){$(a).removeClass("widget_modal_loading")};this.isThisWidgetActive=function(a){return this.callWidgetFn(a,"getRefresh")};this.allWidgetsLoaded=function(){this.stop_modal_loading();this.set_focus()};this.set_focus=function(){var a=this;$(document).ready(function(){var b=$(a.callWidgetTarget("searchboxauto")).find("input.search-bar-field.tt-input");if(0<
b.length)if(""!=b.val())b.blur();else{var d=$(window),f=d.scrollTop();d.height();d=b.offset().top+b.height();d>f&&(smkCommon.debugLog()&&console.log(sprintf(sprintf("View - elemTop_%s : docViewTop%s",d,f))),b.focus())}})};this.showWidget=function(a){a.removeClass("no_refresh");a.show().children().show()};this.hideWidget=function(a){a.addClass("no_refresh");a.hide()};this.generalSolrError=function(a){$(this.target).empty().html(sprintf("%s &nbsp;&nbsp; returned:&nbsp;&nbsp; %s<br>Please contact website administrator.",
Manager.solrUrl,a))};this.hideWidgetsNotInCurrentLanguage=function(a){switch(a){case smkCommon.enum_lang.en:a=smkCommon.enum_lang.en;break;case smkCommon.enum_lang.dk:a=smkCommon.enum_lang.dk;break;default:a=smkCommon.enum_lang.def}this.hideWidget($(this.target).find("[lang]").not("[lang*='"+a+"']"));this.showWidget($(this.target).find("[lang][lang*='"+a+"']"))}}});(function(b){"function"===typeof define&&define.amd?define(["core/AbstractWidget"],b):b()})(function(){AjaxSolr.AbstractTextWidget=AjaxSolr.AbstractWidget.extend({constructor:function(b){AjaxSolr.AbstractTextWidget.__super__.constructor.apply(this,arguments);AjaxSolr.extend(this,{start:0},b)},set:function(b){return this.changeSelection(function(){this.manager.store.get("q").val(b)})},clear:function(){return this.changeSelection(function(){this.manager.store.remove("q")})},changeSelection:function(b){var a=
this.manager.store.get("q").val();b.apply(this);b=this.manager.store.get("q").val();b!==a&&this.afterChangeSelection(b);return b!==a},afterChangeSelection:function(b){},unclickHandler:function(){var b=this;return function(){b.clear()&&b.doRequest();return!1}},clickHandler:function(b){var a=this;return function(){a.set(b)&&a.doRequest();return!1}}})});(function(b){AjaxSolr.SearchBoxWidget=AjaxSolr.AbstractTextWidget.extend({hightlight:!0,init:function(){var a=b(this.target),c={default_text:this.manager.translator.getLabel("search_box_default"),search:this.manager.translator.getLabel("search_box_button")},c=this.template_integration_json(c,"#searchboxTemplate");a.html(c);b(this.target).find("input").on("click",function(){b(this).select()});b(this.target).find("form").bind("submit",{mmgr:this.manager,$input:b(this.target).find("input#search-bar"),
caller:this},function(a){a.preventDefault();a.stopImmediatePropagation();var c=a.data.$input.val();b(a.data.caller).trigger({type:"smk_search_q_added",val:c})})},beforeRequest:function(){if("detail"!=ModelManager.get_view()){var a=ModelManager.get_q();b(this.target).find("input").val(a)}b(this.target).attr("placeholder",this.manager.translator.getLabel("search_box_default"))},template_integration_json:function(a,c){return Mustache.to_html(b(this.template).find(c).html(),a)}})})(jQuery);(function(b){AjaxSolr.SearchBoxAutoWidget=AjaxSolr.AbstractTextWidget.extend({requestSent:!1,list:[],init:function(){var a=this;b(this.target);a.requestSent=!1;a.create_typeahead();a.init_typeahead();b(a.target).find("input.search-bar-field").bind("typeahead:selected",function(c,e,d){a.requestSent=!0;b(a).trigger({type:"smk_search_filter_changed",params:{auto:sprintf("%s:%s",e.field,AjaxSolr.Parameter.escapeValue(e.facet))}})});b(a.target).find("input").bind("keydown",function(c){!1===a.requestSent&&
13==c.which&&(c=b(this).val(),b(a).trigger({type:"smk_search_q_added",val:c}))})},beforeRequest:function(){var a=this;a.create_typeahead();a.init_typeahead();b(a.target).find("input.search-bar-field").bind("typeahead:selected",function(c,e,d){a.requestSent=!0;b(a).trigger({type:"smk_search_filter_changed",params:{auto:sprintf("%s:%s",e.field,AjaxSolr.Parameter.escapeValue(e.facet))}})});b(a.target).find("input").bind("keydown",function(c){!1===a.requestSent&&13==c.which&&(c=b(this).val(),b(a).trigger({type:"smk_search_q_added",
val:c}))})},afterRequest:function(){this.requestSent=!1},create_typeahead:function(){var a=this,c=b(this.target),e={default_text:this.manager.translator.getLabel("search_box_default"),search:this.manager.translator.getLabel("search_box_button")},e=a.template_integration_json(e,"#searchboxTemplate");c.html(e);c.find("input.search-bar-field").typeahead({});b(this.target).find("input.search-bar-field.tt-input").bind("input",function(){a.requestSent=!1});if("detail"!=ModelManager.get_view()){var e=ModelManager.get_auto_value(),
c=e.field,e=smkCommon.isValidDataText(e.text)?AjaxSolr.Parameter.unescapeValue(e.text.replace(/^"|"$/g,"")):null,d=ModelManager.get_q(),c=0!=d.length?d.toString():this.get_text_from_facet(e,c);b(this.target).find("input.search-bar-field").val(c)}b(this.target).find("input.search-bar-field.tt-input").attr("placeholder",this.manager.translator.getLabel("search_box_default"));b(this.target).find("input").on("click",function(){b(this).select()});b(this.target).find("input.search-bar-field").typeahead("destroy")},
init_typeahead:function(){var a=this.init_bloodhound();a.initialize();b(this.target).find("input.search-bar-field").typeahead({hint:!0,highlight:!0,minLength:1},{name:"autosearch",displayKey:"text",source:a.ttAdapter(),templates:{suggestion:function(a){return sprintf("<p>%s&nbsp;<i>(%s)</i></p>",a.text,a.type)}}})},init_bloodhound:function(){var a=this,c=a.manager.store.get_qf_string();a.list=[];params="facet=true;facet.limit=-1;facet.mincount=1;json.nl=map;sort=score desc;rows=0;defType=edismax".split(";");
for(var b=0;b<a.fields.length;b++)params.push("facet.field="+a.fields[b]);c=encodeURIComponent(sprintf("&%s&qf=%s",params.join("&"),c));return new Bloodhound({datumTokenizer:function(a){return Bloodhound.tokenizers.whitespace(a.value)},queryTokenizer:Bloodhound.tokenizers.whitespace,limit:a.limit,remote:{url:a.manager.proxyUrl+"?query=q%3D%QUERY"+c+"&callback="+function(a){},ajax:{beforeSend:function(c,b){a.requestSent=!1},success:function(a,c,b){},dataType:"jsonp",data:{wt:"json",solrUrl:a.manager.solrUrl,
language:smkCommon.getCurrentLanguage()},type:"POST"},filter:function(c){a.list=[];for(var b=0;b<a.fields.length;b++){var e=a.fields[b],g;for(g in c.facet_counts.facet_fields[e])if(-1<g.toLowerCase().indexOf(c.responseHeader.params.q.toLowerCase())&&(new String,a.list.push({facet:g,field:e,type:a.manager.translator.getLabel("autocomp_"+e),count:c.facet_counts.facet_fields[e][g],text:a.get_text_from_facet(g,e)})),a.list.length>=a.limit)break}return a.list}}})},get_text_from_facet:function(a,c){var b=
new String;switch(c){case "materiale":case "materiale_en":b=a.split(smkCommon.split_2_niv);b=smkCommon.isValidDataText(smkCommon.getValueFromSplit(b,0))?smkCommon.firstCapital(smkCommon.getValueFromSplit(b,0).trim()):"";break;default:b=a}return b},template_integration_json:function(a,c){return Mustache.to_html(b(this.template).find(c).html(),a)},limit:10})})(jQuery);(function(b){AjaxSolr.SorterWidget=AjaxSolr.AbstractFacetWidget.extend({constructor:function(a){AjaxSolr.AbstractFacetWidget.__super__.constructor.apply(this,arguments);AjaxSolr.extend(this,{options:{}},a)},beforeRequest:function(){for(var a=this,c=b(this.target),e=[],d=jQuery.extend(!0,{},this.options),f=!0,h=0,g=d.all.length;h<g;h++)if(ModelManager.getModel().sort==d.all[h].value){d.all[h].selected=!0;f=!1;break}f&&(d.all[0].selected=!0);h=0;for(g=d.all.length;h<g;h++)d.all[h].text=smkCommon.firstCapital(a.manager.translator.getLabel("sorter_"+
d.all[h].value)),e.push(d.all[h]);e=a.template_integration_json({label:smkCommon.firstCapital(this.manager.translator.getLabel("sorter_sort")),options:e},"#sorterItemsTemplate");c.html(e);b(".dropit-sortby").dropit();b(".dropit-sortby .dropit-toggle span").text(b(".dropit-sortby li.active a").text());b(".dropit ul li a").click(function(a){a.preventDefault()});b(".dropit ul li").click(function(){var c=b(this).closest(".dropit");b(this).siblings().each(function(){b(this).removeClass("active")});b(this).addClass("active");
c.find(".dropit-toggle span").text(b(this).find("a").text());b(a).trigger({type:"smk_search_sorter_changed",params:b(this).attr("sort")})})},clickHandler:function(){var a=this;return function(c,e){c.stopImmediatePropagation();b(a).trigger({type:"smk_search_sorter_changed",params:e});return!1}},template_integration_json:function(a,c){return Mustache.to_html(b(this.template).find(c).html(),a)},resetSelect:function(){b(this.target).find("select").prop("selectedIndex",0);b(this.target).find("select").trigger("chosen:updated")},
setOption:function(a){b(this.target).find("select").val(a);b(this.target).find("select").trigger("chosen:updated")}})})(jQuery);(function(b,a){if("object"===typeof exports&&exports)a(exports);else{var c={};a(c);"function"===typeof define&&define.amd?define(c):b.getData_Common=c}})(this,function(b){b.getLocation_location=function(a,c){var b=a.location_name,d=smkCommon.isValidDataText(b)?c.manager.translator.getCollection(b):"";return smkCommon.isValidDataText(d)?sprintf("%s %s",c.manager.translator.getLabel("teaser_on_display"),b):c.manager.translator.getLabel("teaser_appoint")};b.getIdent_vaerktype=function(a){var c;switch(smkCommon.getCurrentLanguage()){case "dk":c=
a.object_type_dk;break;case "en":c=a.object_type_en}return smkCommon.isValidDataText(c)?c:null};b.getIdent_dele=function(a){return void 0===a.numberofobjects?null:a.numberofobjects};b.getIdent_invnummer=function(a){return void 0===a.id?null:a.id};b.getIdent_samling=function(a,c){if(void 0===a.department)return null;var b;$.each(getData_Common.enumDepartment,function(d,f){if(-1<a.department.indexOf(f))return b=smkCommon.firstCapital(c.manager.translator.getLabel("search_"+d+"_lab")),!1});return b};
b.getIdent_andet_inv=function(a){return void 0===a.other_numbers_andet_inventar?null:a.other_numbers_andet_inventar};b.getProducent_producent=function(a,c){var b=[],d,f,h;switch(smkCommon.getCurrentLanguage()){case "dk":d=a.artist_birth_dk;f=a.artist_death_dk;h=a.artist_natio_dk;break;case "en":d=a.artist_birth_en,f=a.artist_death_en,h=a.artist_natio_en}if(void 0!==a.artist_name){if(a.artist_name.length!=a.artist_auth.length&&a.artist_name.length!=a.artist_natio_dk.length&&a.artist_name.length!=d.length&&
a.artist_name.length!=f.length)return a.artist_name;for(var g=0,k=a.artist_name.length;g<k;g++)if(a.artist_auth[g]==c){var l=a.artist_name[g],q=smkCommon.isValidDataText(h[g],"natio")?h[g]:"",p=d[g],y=smkCommon.isValidDataText(f[g],"date")?f[g]:1800>d[g]?"(?)":"",p=smkCommon.isValidDataText(f[g],"date")||smkCommon.isValidDataText(d[g],"date")?sprintf("%s - %s",p,y):"",y=smkCommon.isValidDataText(a.artist_auth[g])&&"original"!=a.artist_auth[g]?a.artist_auth[g]:"";b.push({artist_data:{name:l,nationality:q,
dates:p,role:y}})}}return b};b.getProducent_all_producers=function(a){var c=[];$.each(b.enumProducent,function(e,d){var f=b.getProducent_producent(a,d);$.each(f,function(a,b){b.artist_data.type=e;c.push(b.artist_data)})});return c};b.getProducent_formeri=function(a){return void 0===a.formeri?null:a.formeri};b.getProducent_objectophavsbeskrivelse=function(a){if(void 0===a.objectophavsbeskrivelse)return null;var c=[];a=a.objectophavsbeskrivelse.split(smkCommon.split_1_niv);for(var b=a.length,d=0;d<
b;d++)c.push({value:a[d]});return 0<c.length?c:null};b.getTitle=function(a,c){if(void 0===a.title_all)return null;for(var b=a.title_all.split(smkCommon.split_1_niv),d=[],f=b.length,h=0;h<f;h++){var g=b[h].split(smkCommon.split_2_niv);if(null!=smkCommon.getValueFromSplit(g,4)&&-1<smkCommon.getValueFromSplit(g,4).indexOf(c)||null==smkCommon.getValueFromSplit(g,4)&&"museum"==c||null!=smkCommon.getValueFromSplit(g,4)&&-1<smkCommon.getValueFromSplit(g,4).indexOf("blank")&&"museum"==c||"first"==c||"all"==
c){var k=smkCommon.getValueFromSplit(g,0),l=smkCommon.getValueFromSplit(g,1);smkCommon.getValueFromSplit(g,2);var q=smkCommon.getValueFromSplit(g,3),p=null==smkCommon.getValueFromSplit(g,4)?"museum":smkCommon.getValueFromSplit(g,4),g=new String;smkCommon.isValidDataText(q)&&(q=q.split(smkCommon.split_3_niv),0<q.length&&(g=q[0].split(smkCommon.split_4_niv)[0]));k={title:k,type:p};smkCommon.isValidDataText(l)&&(k.note=l);smkCommon.isValidDataText(g)&&(k.trans=g);d.push(k);if("first"==c)break}}return 0<
d.length?d:null};b.getFirstTitle=function(a){var c=getData_Common.getTitle(a,"first"),b=new String;if(null!=c&&0<c.length)switch(smkCommon.getCurrentLanguage()){case "dk":b=c[0].title;break;case "en":b=smkCommon.isValidDataText(c[0].trans)?c[0].trans:c[0].title}else b=a.title_first;return smkCommon.isValidDataText(b)?b:null};b.getProduction_vaerkdatering=function(a){var c;switch(smkCommon.getCurrentLanguage()){case "dk":c=a.object_production_date_text_dk;break;case "en":c=a.object_production_date_text_en}return smkCommon.isValidDataText(c)?
c:null};b.getProduction_udgivet_place=function(a){if(void 0===a.object_production_place_udgivet)return null;var c=[];a=a.object_production_place_udgivet.split(smkCommon.split_1_niv);for(var b=a.length,d=0;d<b;d++)c.push(a[d]);return 0<c.length?c:null};b.getProduction_udfoert_place=function(a){if(void 0===a.object_production_place_udfoert)return null;var c=[];a=a.object_production_place_udfoert.split(smkCommon.split_1_niv);for(var b=a.length,d=0;d<b;d++)c.push(a[d])};b.getProduction_note=function(a){return void 0===
a.object_production_note?null:a.object_production_note};b.getTechnique_technique=function(a){if(void 0===a.prod_technique_dk&&void 0===a.prod_technique_en)return null;var c=[];switch(smkCommon.getCurrentLanguage()){case "dk":a=void 0!==a.prod_technique_dk?a.prod_technique_dk:null;break;case "en":a=void 0!==a.prod_technique_en?a.prod_technique_en:null;break;default:a=null}if(smkCommon.isValidDataText(a)){a=a.split(smkCommon.split_1_niv);for(var b=a.length,d=0;d<b;d++)c.push({value:a[d]})}return 0==
c.length?null:c};b.getTechnique_dimensions=function(a){var c=[];void 0!==a.dimension_netto&&c.push({type:"netto",dim:a.dimension_netto});void 0!==a.dimension_bladmaal&&c.push({type:"bladmaal",dim:a.dimension_bladmaal});void 0!==a.dimension_plademaal&&c.push({type:"plademaal",dim:a.dimension_plademaal});void 0!==a.dimension_brutto&&c.push({type:"brutto",dim:a.dimension_brutto});void 0!==a.dimension_billedmaal&&c.push({type:"billedmaal",dim:a.dimension_billedmaal});void 0!==a.dimension_monteringsmaal&&
c.push({type:"monteringsmaal",dim:a.dimension_monteringsmaal});return c};b.getTechnique_diameter=function(a){return void 0===a.dimension_diameter?null:a.dimension_diameter};b.getTechnique_vaegt=function(a){return void 0===a.dimension_weight?null:a.dimension_weight};b.getTechnique_materiale=function(a){var c=[];switch(smkCommon.getCurrentLanguage()){case "dk":a=void 0!==a.materiale?a.materiale:null;break;case "en":a=void 0!==a.materiale_en?a.materiale_en:null;break;default:a=null}if("[object Array]"===
Object.prototype.toString.call(a))for(var b=a.length,d=0;d<b;d++){var f=a[d].split(smkCommon.split_2_niv),h=null!=smkCommon.getValueFromSplit(f,0)?smkCommon.getValueFromSplit(f,0):"",f=null!=smkCommon.getValueFromSplit(f,1)?smkCommon.getValueFromSplit(f,1):"";c.push({mat_val:h,mat_type:f})}return c};b.getTechnique_format=function(a){return void 0===a.form?null:a.form};b.getTechnique_watermark=function(a){return void 0===a.watermark?null:a.watermark};b.getTechnique_tilstand=function(a){return void 0===
a.physicaldescription?null:a.physicaldescription};b.getTechnique_vaerkstatus=function(a){if(void 0===a.vaerkstatus)return null;var c=[];a=a.vaerkstatus.split(smkCommon.split_1_niv);for(var b=a.length,d=0;d<b;d++)c.push({value:a[d]});return 0<c.length?c:null};b.getTechnique_eksemplar=function(a){return void 0===a.oplag?null:a.oplag};b.getTechnique_bladnummer=function(a){return void 0===a.other_numbers_bladnummer?null:a.other_numbers_bladnummer};b.getTechnique_sidetal=function(a){return void 0===a.other_numbers_sidetal?
null:a.other_numbers_sidetal};b.getTechnique_omslag=function(a){return void 0===a.omslag?null:a.omslag};b.getTechnique_stadium=function(a){return void 0===a.stadium?null:a.stadium};b.getTechnique_kollation=function(a){if(void 0===a.object_briefdescriptions)return null;var c=[];a=a.object_briefdescriptions.split(smkCommon.split_1_niv);for(var b=a.length,d=0;d<b;d++)c.push({value:a[d]});return 0<c.length?c:null};b.getTechnique_note_vaerkstatus=function(a){if(void 0===a.description_note_dk&&void 0===
a.description_note_en)return null;var c=[];switch(smkCommon.getCurrentLanguage()){case "dk":a=void 0!==a.description_note_dk?a.description_note_dk:null;break;case "en":a=void 0!==a.description_note_en?a.description_note_en:null;break;default:a=null}if(smkCommon.isValidDataText(a)){a=a.split(smkCommon.split_1_niv);for(var b=a.length,d=0;d<b;d++)c.push({value:a[d]})}return c};b.getTechnique_opstilling=function(a){return void 0===a.opstilling?null:a.opstilling};b.getTechnique_note_elementer=function(a){return void 0===
a.note_elementer?null:a.note_elementer};b.getInscription_signatur=function(a){if(void 0===a.inscription_signatur)return null;var c=[];a=a.inscription_signatur.split(smkCommon.split_1_niv);for(var b=a.length,d=0;d<b;d++)c.push({value:a[d]});return 0<c.length?c:null};b.getInscription_tryktsignatur=function(a){if(void 0===a.inscription_tryktsignatur)return null;var c=[];a=a.inscription_tryktsignatur.split(smkCommon.split_1_niv);for(var b=a.length,d=0;d<b;d++)c.push({value:a[d]});return 0<c.length?c:
null};b.getInscription_paaskrift=function(a){if(void 0===a.inscription_paaskrift)return null;var c=[];a=a.inscription_paaskrift.split(smkCommon.split_1_niv);for(var b=a.length,d=0;d<b;d++)c.push({value:a[d]});return 0<c.length?c:null};b.getInscription_trykttekst=function(a){if(void 0===a.inscription_trykttekst)return null;var c=[];a=a.inscription_trykttekst.split(smkCommon.split_1_niv);for(var b=a.length,d=0;d<b;d++)c.push({value:a[d]});return 0<c.length?c:null};b.getInscription_samlermaerke=function(a){if(void 0===
a.inscription_samlermaerke)return null;var c=[];a=a.inscription_samlermaerke.split(smkCommon.split_1_niv);for(var b=a.length,d=0;d<b;d++)c.push({value:a[d]});return 0<c.length?c:null};b.getErhverv_dato=function(a){switch(smkCommon.getCurrentLanguage()){case "dk":a=void 0!==a.acq_date?a.acq_date:null;break;case "en":a=void 0!==a.acq_date_en?a.acq_date_en:null;break;default:a=null}return a};b.getErhverv_method=function(a){return void 0===a.acq_method?null:a.acq_method};b.getErhverv_source=function(a){return void 0===
a.acq_source?null:a.acq_source};b.getErhverv_proveniens=function(a){if(void 0===a.proveniens)return null;var c=[];a=a.proveniens.split(smkCommon.split_1_niv);for(var b=a.length,d=0;d<b;d++)c.push({value:a[d]});return 0<c.length?c:null};b.getReferences_vaerkfortegn=function(a){return void 0===a.other_numbers_vaerkfortegn?null:a.other_numbers_vaerkfortegn};b.getReferences_gernsheim=function(a){return void 0===a.other_numbers_gernsheim?null:a.other_numbers_gernsheim};b.getReferences_beckett=function(a){return void 0===
a.other_numbers_beckett?null:a.other_numbers_beckett};b.getReferences_texts=function(a){if(void 0===a.reference_texts)return null;a=a.reference_texts.split(smkCommon.split_1_niv);for(var c=a.length,b=[],d=0;d<c;d++){var f=a[d].split(smkCommon.split_2_niv);smkCommon.getValueFromSplit(f,0);var h=smkCommon.getValueFromSplit(f,1);if(smkCommon.isValidDataText(h)){var h=h.replace(/\r\n\r\n/g,"</p><p>").replace(/\n\n/g,"</p><p>"),h=h.replace(/\r\n/g,"<br />").replace(/\n/g,"<br />"),f=smkCommon.getValueFromSplit(f,
2),g="";switch(smkCommon.getCurrentLanguage()){case "dk":g="dansk";break;case "en":g="engelsk"}smkCommon.isValidDataText(f)&&-1<f.indexOf(g)&&b.push({value:h})}}return 0==b.length?null:b};b.getReferences_litteratur=function(a){if(void 0===a.citations)return null;a=a.citations.split(smkCommon.split_1_niv);for(var c=[],b=a.length,d=0;d<b;d++){var f=a[d].split(smkCommon.split_2_niv);if(smkCommon.isValidDataText(smkCommon.getValueFromSplit(f,1))){var h=smkCommon.getValueFromSplit(f,0),g=smkCommon.getValueFromSplit(f,
1),k=smkCommon.getValueFromSplit(f,2),l=smkCommon.getValueFromSplit(f,3),f=smkCommon.getValueFromSplit(f,4),h=sprintf("%s%s%s%s%s",smkCommon.isValidDataText(h,"agent")?sprintf("%s : ",h):"",smkCommon.isValidDataText(g)?sprintf("<span>%s</span> : ",g):"",smkCommon.isValidDataText(k)?sprintf("%s ",k):"",smkCommon.isValidDataText(l)?sprintf("<i>%s</i> :",l):" :",smkCommon.isValidDataText(f)?sprintf("%s",f):"");c.push({value:h})}}return 0==c.length?null:c};b.getUdstilling_udstilling=function(a){if(void 0===
a.exhibitionvenues)return null;a=a.exhibitionvenues.split(smkCommon.split_1_niv);for(var c=[],b=a.length,d=0;d<b;d++){var f=a[d].split(smkCommon.split_2_niv);if(smkCommon.isValidDataText(smkCommon.getValueFromSplit(f,1))){var h=smkCommon.getValueFromSplit(f,0),g=smkCommon.getValueFromSplit(f,1),k=smkCommon.getValueFromSplit(f,2),f=smkCommon.getValueFromSplit(f,3),g=sprintf("<span>%s</span> : %s : <i>%s | %s</i>",h,g,k,f);smkCommon.isValidDataText(h)&&c.push({value:g})}}return 0==c.length?null:c};
b.getBemaerk_anden_litt=function(a){if(void 0===a.comments)return null;var c=[];a=a.comments.split(smkCommon.split_1_niv);for(var b=a.length,d=0;d<b;d++)c.push({value:a[d]});return 0<c.length?c:null};b.getMotiv_topografisk=function(a){if(void 0===a.topografisk_motiv)return null;var c=[];a=a.topografisk_motiv;for(var b=a.length,d=0;d<b;d++)c.push({value:a[d]});return 0<c.length?c:null};b.getMotiv_portraet=function(a){if(void 0===a.portrait_person)return null;var c=[];a=a.portrait_person;for(var b=
a.length,d=0;d<b;d++)c.push({value:a[d]});return 0<c.length?c:null};b.getMotiv_note=function(a){return void 0===a.content_notes?null:a.content_notes};b.getSubWidgReq_original=function(a){return void 0===a.related_works_orig_number?null:sprintf('id:"%s"',a.related_works_orig_number)};b.getSubWidgReq_vaerkdele=function(a){if(void 0===a.multi_work_ref)return null;var c=smkCommon.getValueFromSplit(a.id.split("/"),0),b=null!=smkCommon.getValueFromSplit(a.id.split("/"),1)?sprintf('id:"%s"',c):null;return sprintf('id:%s/* -id:"%s" %s',
c,a.id,b)};b.getSubWidgReq_relatere=function(a){if(void 0===a.related_id)return null;a=a.related_id.split(";-;");for(var c=[],b=0,d=a.length;b<d;++b){var f=a[b].split(";--;");0<f.length&&c.push(sprintf('id:"%s"',f[1]))}return 0==c.length?null:c.join(" OR ")};b.getMedia_alt=function(a){var c=smkCommon.isValidDataText(getData_Common.getProducent_producent(a,getData_Common.enumProducent.orig))?"":getData_Common.getProducent_producent(a,getData_Common.enumProducent.orig)+" - ",b=getData_Common.getTitle(a,
"museum");a=this.computeCopyright(a);return 0==a?sprintf("%s%s",c,b):sprintf("%s - %s",a,b)};b.getMedia_image=function(a,c){return void 0!==a.medium_image_url?smkCommon.getScaledPicture(a.medium_image_url,c):null};b.getMedia_copyright=function(a,c){var b={};b.link=c.manager.translator.getLabel("copyright_link");b.show=void 0!==a.medium_image_url&&this.computeCopyright(a);b.img_cc0=0==this.computeCopyright(a);b.text=0!=this.computeCopyright(a)?this.computeCopyright(a).trim():null;return b};b.computeCopyright=
function(a){return void 0!==a.copyright?a.copyright.replace(String.fromCharCode(169),""):!1};b.enumDepartment={kks:"kks",kms:"kms",kas:"kas"};b.enumProducent={orig:"original",tilsk:"tilskrevet",tidl:"tidl. tilskrevet",vaerksted:"v\u00e6rksted",efterfoel:"efterf\u00f8lger",efter:"efter",inventor:"inventor",skole:"skole",stil:"stil",kopi:"kopi efter",efterfor:"efter forl\u00e6g af",udgiver:"udgiver",trykker:"trykker",forfatter:"forfatter/redakt\u00f8r"};b.enumTitleTypes={anden:"anden",auktion:"auktion",
beskriv:"beskriv",kunstner:"kunstner",museum:"museum",blank:"museum",oeuvre:"oeuvre",popu:"popu",samler:"samler",serie:"serie",tidlig:"tidlig",udstill:"udstill"};b.getScore=function(a){return a.score}});(function(b,a){if("object"===typeof exports&&exports)a(exports);else{var c={};a(c);"function"===typeof define&&define.amd?define(c):b.getData_Detail_Standard=c}})(this,function(b){b.constructor=function(a){this.get_data=function(a){return{media:{title:getData_Common.getFirstTitle(a),alt:getData_Common.getMedia_alt(a),image:getData_Common.getMedia_image(a,"large"),image_full_path:a.medium_image_url,no_image:void 0===a.medium_image_url?!0:!1,no_image_text:this.caller.manager.translator.getLabel("detail_no_photo"),
copyright:getData_Common.getMedia_copyright(a,this.caller),copyright_text_cc0:this.caller.manager.translator.getLabel("detail_copyright_def"),img_id:a.id,fullsizeText:this.caller.manager.translator.getLabel("detail_fullsize_lab")},info:{ident_invnummer:{key:this.caller.manager.translator.getLabel("detail_reference"),value:getData_Common.getIdent_invnummer(a)},artist:this.getListAllProducers(a),title_museum:getData_Common.getFirstTitle(a),title_serie:this.getDetailSerieTitle(a),title_serie_label:this.caller.manager.translator.getLabel("detail_title_serie"),
datering:{key:this.caller.manager.translator.getLabel("detail_date"),value:getData_Common.getProduction_vaerkdatering(a)},technique:{key:this.caller.manager.translator.getLabel("detail_technique"),value:getData_Common.getTechnique_technique(a)},dim:{key:this.caller.manager.translator.getLabel("detail_dimension"),dim:0<getData_Common.getTechnique_dimensions(a).length?getData_Common.getTechnique_dimensions(a)[0].dim:null},acq:{key:this.caller.manager.translator.getLabel("detail_acquisition"),value:this.getDetailAcq(a)},
location:smkCommon.firstCapital(getData_Common.getLocation_location(a,this.caller))}}};this.getDetailAcq=function(a){var b=smkCommon.isValidDataText(getData_Common.getErhverv_method(a))?sprintf("%s",getData_Common.getErhverv_method(a)):"",d=smkCommon.isValidDataText(getData_Common.getErhverv_source(a))?sprintf(" %s",getData_Common.getErhverv_source(a)):"",f=smkCommon.isValidDataText(getData_Common.getErhverv_dato(a))?sprintf(" %s",getData_Common.getErhverv_dato(a)):"";return smkCommon.isValidDataText(getData_Common.getErhverv_method(a))||
smkCommon.isValidDataText(getData_Common.getErhverv_source(a))||smkCommon.isValidDataText(getData_Common.getErhverv_dato(a))?sprintf("%s%s%s",b,d,f):null};this.getDetailSerieTitle=function(a){a=getData_Common.getTitle(a,"serie");var b=new String;if(null!=a&&0<a.length)switch(smkCommon.getCurrentLanguage()){case "dk":b=a[0].title;break;case "en":b=smkCommon.isValidDataText(a[0].trans)?a[0].trans:a[0].title}return smkCommon.isValidDataText(b)?b:null};this.getListAllProducers=function(a){var b=this;
a=getData_Common.getProducent_all_producers(a);var d=[];$.each(a,function(a,c){c.type="orig"!=c.type?b.caller.manager.translator.getLabel("detail_producent_"+c.type):null;var g=b.getArtistOutput(c);d.push(g)});d.show=0<d.length?!0:!1;return d};this.getArtistOutput=function(a){var b={};void 0!=a.name&&(b.name=a.name);var d=smkCommon.isValidDataText(a.type)?sprintf(", %s",a.type):"",f=smkCommon.isValidDataText(a.dates)?sprintf(", %s",a.dates):"";a=smkCommon.isValidDataText(a.nationality)?sprintf("%s",
a.nationality):"";b.info=a||f?sprintf("(%s%s)",a,f):"";b.info=sprintf("%s%s",b.info,d);return b};this.getImage=function(a){if(void 0!==a&&0!=a.length){var b=a.attr("src");a.attr("alt");a.attr("alt");return'<img src="'+b+'" />'}};this.caller=a}});(function(b,a){if("object"===typeof exports&&exports)a(exports);else{var c={};a(c);"function"===typeof define&&define.amd?define(c):b.getData_Original=c}})(this,function(b){b.constructor=function(a){this.get_data=function(a){return{info:{original_placering_lab:this.caller.manager.translator.getLabel("detail_original_placering_lab"),original_placering:{key:smkCommon.firstCapital(this.caller.manager.translator.getLabel("detail_original_placering")),value:this.getEjer(a)},original_invnummer:{key:smkCommon.firstCapital(this.caller.manager.translator.getLabel("detail_original_invnummer")),
value:getData_Common.getIdent_invnummer(a)},original_proveniens:{key:smkCommon.firstCapital(this.caller.manager.translator.getLabel("detail_original_proveniens")),value:getData_Common.getErhverv_proveniens(a),show:null!==getData_Common.getErhverv_proveniens(a)?!0:!1},original_autenticitet:{key:smkCommon.firstCapital(this.caller.manager.translator.getLabel("detail_original_autenticitet")),value:getData_Common.getProducent_objectophavsbeskrivelse(a),show:null!==getData_Common.getProducent_objectophavsbeskrivelse(a)?
!0:!1},original_tilstand:{key:smkCommon.firstCapital(this.caller.manager.translator.getLabel("detail_original_tilstand")),value:getData_Common.getTechnique_tilstand(a)},original_indskrift:{key:smkCommon.firstCapital(this.caller.manager.translator.getLabel("detail_original_indskrift")),value:getData_Common.getTechnique_kollation(a),show:null!==getData_Common.getTechnique_kollation(a)?!0:!1},original_vaerkdatering:{key:smkCommon.firstCapital(this.caller.manager.translator.getLabel("detail_original_vaerkdatering")),
value:getData_Common.getProduction_vaerkdatering(a)},original_technique:{key:smkCommon.firstCapital(this.caller.manager.translator.getLabel("detail_original_technique")),value:getData_Common.getTechnique_technique(a),show:null!==getData_Common.getTechnique_technique(a)?!0:!1},original_bemaerk:{key:smkCommon.firstCapital(this.caller.manager.translator.getLabel("detail_original_bemaerk")),value:getData_Common.getBemaerk_anden_litt(a),show:null!==getData_Common.getBemaerk_anden_litt(a)?!0:!1}}}};this.getEjer=
function(a){return void 0===a.ejer?null:a.ejer};this.caller=a}});(function(b,a){if("object"===typeof exports&&exports)a(exports);else{var c={};a(c);"function"===typeof define&&define.amd?define(c):b.getData_Detail_Extended=c}})(this,function(b){b.constructor=function(a){this.get_data=function(b){return{info:{ident_lab:this.caller.manager.translator.getLabel("detail_ident_lab"),ident_vaerktype:{key:smkCommon.firstCapital(this.caller.manager.translator.getLabel("detail_ident_vaerktype")),value:smkCommon.firstCapital(this.getRootArtType(b))},ident_dele:{key:smkCommon.firstCapital(this.caller.manager.translator.getLabel("detail_ident_dele")),
value:getData_Common.getIdent_dele(b)},ident_invnummer:{key:smkCommon.firstCapital(this.caller.manager.translator.getLabel("detail_ident_invnummer")),value:getData_Common.getIdent_invnummer(b)},ident_samling:{key:smkCommon.firstCapital(this.caller.manager.translator.getLabel("detail_ident_samling")),value:getData_Common.getIdent_samling(b,a)},ident_andet_inv:{key:smkCommon.firstCapital(this.caller.manager.translator.getLabel("detail_ident_andet_inv")),value:getData_Common.getIdent_andet_inv(b)},producent_lab:this.caller.manager.translator.getLabel("detail_producent_lab"),
producent_producents:{value:this.getListAllProducers(b),show:void 0!==b.artist_name?!0:!1},producent_formeri:{key:smkCommon.firstCapital(this.caller.manager.translator.getLabel("detail_producent_formeri")),value:getData_Common.getProducent_formeri(b)},producent_objectophavsbeskrivelse:{key:smkCommon.firstCapital(this.caller.manager.translator.getLabel("detail_producent_objectophavsbeskrivelse")),value:getData_Common.getProducent_objectophavsbeskrivelse(b),show:null!==getData_Common.getProducent_objectophavsbeskrivelse(b)?
!0:!1},title_lab:this.caller.manager.translator.getLabel("detail_title_lab"),title_titles:{value:this.getAllTitles(b),show:!0,key_note:this.caller.manager.translator.getLabel("detail_title_note"),key_trans:this.caller.manager.translator.getLabel("detail_title_translation"),key_trans_note:this.caller.manager.translator.getLabel("detail_title_translation_note")},datering_lab:this.caller.manager.translator.getLabel("detail_datering_lab"),datering_production_vaerkdatering:{key:smkCommon.firstCapital(this.caller.manager.translator.getLabel("detail_datering_production_vaerkdatering")),
value:getData_Common.getProduction_vaerkdatering(b)},datering_production_udgivet_place:{key:smkCommon.firstCapital(this.caller.manager.translator.getLabel("detail_datering_production_udgivet_place")),value:getData_Common.getProduction_udgivet_place(b)},datering_production_udfoert_place:{key:smkCommon.firstCapital(this.caller.manager.translator.getLabel("detail_datering_production_udfoert_place")),value:getData_Common.getProduction_udfoert_place(b)},datering_production_note:{key:smkCommon.firstCapital(this.caller.manager.translator.getLabel("detail_datering_production_note")),
value:getData_Common.getProduction_note(b)},technique_lab:this.caller.manager.translator.getLabel("detail_technique_lab"),technique_technique:{key:smkCommon.firstCapital(this.caller.manager.translator.getLabel("detail_technique_technique")),value:getData_Common.getTechnique_technique(b),show:null!==getData_Common.getTechnique_technique(b)?!0:!1},technique_dimensions:{key:smkCommon.firstCapital(this.caller.manager.translator.getLabel("detail_technique_dimensions")),value:this.getDim(b),show:0<this.getDim(b).length?
!0:!1},technique_diameter:{key:smkCommon.firstCapital(this.caller.manager.translator.getLabel("detail_technique_diameter")),value:getData_Common.getTechnique_diameter(b)},technique_vaegt:{key:smkCommon.firstCapital(this.caller.manager.translator.getLabel("detail_technique_vaegt")),value:getData_Common.getTechnique_vaegt(b)},technique_materiale:{key:smkCommon.firstCapital(this.caller.manager.translator.getLabel("detail_technique_materiale")),value:this.getMateriale(b),show:0<this.getMateriale(b).length?
!0:!1},technique_format:{key:smkCommon.firstCapital(this.caller.manager.translator.getLabel("detail_technique_format")),value:getData_Common.getTechnique_format(b)},technique_watermark:{key:smkCommon.firstCapital(this.caller.manager.translator.getLabel("detail_technique_watermark")),value:getData_Common.getTechnique_watermark(b)},technique_tilstand:{key:smkCommon.firstCapital(this.caller.manager.translator.getLabel("detail_technique_tilstand")),value:getData_Common.getTechnique_tilstand(b)},technique_vaerkstatus:{key:smkCommon.firstCapital(this.caller.manager.translator.getLabel("detail_technique_vaerkstatus")),
value:getData_Common.getTechnique_vaerkstatus(b),show:null!=getData_Common.getTechnique_vaerkstatus(b)?!0:!1},technique_eksemplar:{key:smkCommon.firstCapital(this.caller.manager.translator.getLabel("detail_technique_eksemplar")),value:getData_Common.getTechnique_eksemplar(b)},technique_bladnummer:{key:smkCommon.firstCapital(this.caller.manager.translator.getLabel("detail_technique_bladnummer")),value:getData_Common.getTechnique_bladnummer(b)},technique_sidetal:{key:smkCommon.firstCapital(this.caller.manager.translator.getLabel("detail_technique_sidetal")),
value:getData_Common.getTechnique_sidetal(b)},technique_omslag:{key:smkCommon.firstCapital(this.caller.manager.translator.getLabel("detail_technique_omslag")),value:getData_Common.getTechnique_omslag(b)},technique_stadium:{key:smkCommon.firstCapital(this.caller.manager.translator.getLabel("detail_technique_stadium")),value:getData_Common.getTechnique_stadium(b)},technique_kollation:{key:smkCommon.firstCapital(this.caller.manager.translator.getLabel("detail_technique_kollation")),value:getData_Common.getTechnique_kollation(b),
show:null!=getData_Common.getTechnique_kollation(b)?!0:!1},technique_note_vaerkstatus:{key:smkCommon.firstCapital(this.caller.manager.translator.getLabel("detail_technique_note_vaerkstatus")),value:getData_Common.getTechnique_note_vaerkstatus(b),show:null!=getData_Common.getTechnique_note_vaerkstatus(b)?!0:!1},inscription_lab:this.caller.manager.translator.getLabel("detail_inscription_lab"),inscription_signatur:{key:smkCommon.firstCapital(this.caller.manager.translator.getLabel("detail_inscription_signatur")),
value:this.getInscription_transl(getData_Common.getInscription_signatur(b)),show:null!=getData_Common.getInscription_signatur(b)?!0:!1},inscription_tryktsignatur:{key:smkCommon.firstCapital(this.caller.manager.translator.getLabel("detail_inscription_tryktsignatur")),value:this.getInscription_transl(getData_Common.getInscription_tryktsignatur(b)),show:null!=getData_Common.getInscription_tryktsignatur(b)?!0:!1},inscription_paaskrift:{key:smkCommon.firstCapital(this.caller.manager.translator.getLabel("detail_inscription_paaskrift")),
value:this.getInscription_transl(getData_Common.getInscription_paaskrift(b)),show:null!=getData_Common.getInscription_paaskrift(b)?!0:!1},inscription_trykttekst:{key:smkCommon.firstCapital(this.caller.manager.translator.getLabel("detail_inscription_trykttekst")),value:this.getInscription_transl(getData_Common.getInscription_trykttekst(b)),show:null!=getData_Common.getInscription_trykttekst(b)?!0:!1},inscription_samlermaerke:{key:smkCommon.firstCapital(this.caller.manager.translator.getLabel("detail_inscription_samlermaerke")),
value:getData_Common.getInscription_samlermaerke(b),show:null!=getData_Common.getInscription_samlermaerke(b)?!0:!1},erhverv_lab:this.caller.manager.translator.getLabel("detail_erhverv_lab"),erhverv_erhverv:{key:smkCommon.firstCapital(this.caller.manager.translator.getLabel("detail_erhverv_erhverv")),value:this.getDetailAcq(b)},erhverv_proveniens:{key:smkCommon.firstCapital(this.caller.manager.translator.getLabel("detail_erhverv_proveniens")),value:getData_Common.getErhverv_proveniens(b),show:null!=
getData_Common.getErhverv_proveniens(b)?!0:!1},references_lab:this.caller.manager.translator.getLabel("detail_references_lab"),references_vaerkfortegn:{key:smkCommon.firstCapital(this.caller.manager.translator.getLabel("detail_references_vaerkfortegn")),value:getData_Common.getReferences_vaerkfortegn(b)},references_gernsheim:{key:smkCommon.firstCapital(this.caller.manager.translator.getLabel("detail_references_gernsheim")),value:getData_Common.getReferences_gernsheim(b)},references_beckett:{key:smkCommon.firstCapital(this.caller.manager.translator.getLabel("detail_references_beckett")),
value:getData_Common.getReferences_beckett(b)},references_litteratur:{key:smkCommon.firstCapital(this.caller.manager.translator.getLabel("detail_references_litteratur")),value:getData_Common.getReferences_litteratur(b),show:null!=getData_Common.getReferences_litteratur(b)?!0:!1},references_texts:{value:getData_Common.getReferences_texts(b),show:null!=getData_Common.getReferences_texts(b)?!0:!1},udstilling_lab:this.caller.manager.translator.getLabel("detail_udstilling_lab"),udstilling_udstilling:{key:smkCommon.firstCapital(this.caller.manager.translator.getLabel("detail_udstilling_udstilling")),
value:getData_Common.getUdstilling_udstilling(b),show:null!=getData_Common.getUdstilling_udstilling(b)?!0:!1},bemaerk_lab:this.caller.manager.translator.getLabel("detail_bemaerk_lab"),bemaerk_anden_litt:{key:smkCommon.firstCapital(this.caller.manager.translator.getLabel("detail_bemaerk_anden_litt")),value:getData_Common.getBemaerk_anden_litt(b),show:null!=getData_Common.getBemaerk_anden_litt(b)?!0:!1},motiv_lab:this.caller.manager.translator.getLabel("detail_motiv_lab"),motiv_topografisk:{key:smkCommon.firstCapital(this.caller.manager.translator.getLabel("detail_motiv_topografisk")),
value:getData_Common.getMotiv_topografisk(b),show:null!=getData_Common.getMotiv_topografisk(b)?!0:!1},motiv_portraet:{key:smkCommon.firstCapital(this.caller.manager.translator.getLabel("detail_motiv_portraet")),value:getData_Common.getMotiv_portraet(b),show:null!=getData_Common.getMotiv_portraet(b)?!0:!1},motiv_note:{key:smkCommon.firstCapital(this.caller.manager.translator.getLabel("detail_motiv_note")),value:getData_Common.getMotiv_note(b),show:null!=getData_Common.getMotiv_note(b)?!0:!1}},subwidget:{req_original:getData_Common.getSubWidgReq_original(b),
req_multiwork:getData_Common.getSubWidgReq_vaerkdele(b),req_relatedid:getData_Common.getSubWidgReq_relatere(b)}}};this.getInscription_transl=function(a){if("en"==smkCommon.getCurrentLanguage()&&null!=a)for(var b=0;b<a.length;b++){var d=a[b],f=d.value.split(":"),f=null!=smkCommon.getValueFromSplit(f,0)?smkCommon.getValueFromSplit(f,0):"",h=new String,g=smkCommon.replace_non_alpha_char(smkCommon.replace_dansk_char(f));switch(g){case "f_n_":case "f_n_m_f_":case "f_n_t_h_":case "f_n_t_h_f_m_":case "f_n_t_v_":case "f_n_t_v_f_m_":case "f_o_":case "f_o_m_f_":case "f_o_t_h_":case "f_o_t_v_":case "i_bunden_":case "m_f_":case "n_":case "n_t_h_":case "n_t_v_":case "o_m_":case "t_h_":case "t_h_f_m_":case "t_h_m_f_":case "t_v_":case "t_v_f_m_":case "t_v_m_f_":case "u_m_":case "oe_":case "oe_t_h_":case "oe_t_v_":h=
this.caller.manager.translator.getLabel("inscription_"+g)}smkCommon.isValidDataText(h)&&(a[b].value=d.value.replace(f,h))}return a};this.getDetailAcq=function(a){return smkCommon.isValidDataText(getData_Common.getErhverv_dato(a))?sprintf(" %s",getData_Common.getErhverv_dato(a)):""};this.getDim=function(a){for(var b=[],d=0;d<getData_Common.getTechnique_dimensions(a).length;d++){var f={dim:getData_Common.getTechnique_dimensions(a)[d].dim,type:this.caller.manager.translator.getLabel("detail_technique_dimensions_"+
getData_Common.getTechnique_dimensions(a)[d].type)};b.push(f)}return b};this.getMateriale=function(a){for(var b=[],d=0;d<getData_Common.getTechnique_materiale(a).length;d++){var f;0<getData_Common.getTechnique_materiale(a)[d].mat_type.indexOf("material")&&(f="detail_technique_materiale_material");0<getData_Common.getTechnique_materiale(a)[d].mat_type.indexOf("medium")&&(f="detail_technique_materiale_medium");0<getData_Common.getTechnique_materiale(a)[d].mat_type.indexOf("grundering")&&(f="detail_technique_materiale_grundering");
var h={value:getData_Common.getTechnique_materiale(a)[d].mat_val,type:void 0!==f?this.caller.manager.translator.getLabel(f):f};b.push(h)}return b};this.getListAllProducers=function(a){var b=this;a=getData_Common.getProducent_all_producers(a);var d=[];$.each(a,function(a,c){var g=b.getArtistOutput(c);g.type=smkCommon.firstCapital(b.caller.manager.translator.getLabel("detail_producent_"+c.type));d.push(g)});return d};this.getArtistOutput=function(a){var b={};void 0!=a.name&&(b.name=a.name);var d=smkCommon.isValidDataText(a.dates)?
sprintf(", %s",a.dates):"";a=smkCommon.isValidDataText(a.nationality)?sprintf("%s",a.nationality):"";b.info=d||a?sprintf("(%s%s)",a,d):"";return b};this.getAllTitles=function(a){var b=this;a=getData_Common.getTitle(a,"all");$.each(a,function(a,c){$.each(getData_Common.enumTitleTypes,function(a,d){if(smkCommon.isValidDataText(c.type)&&-1<c.type.indexOf(a))return c.type=smkCommon.firstCapital(b.caller.manager.translator.getLabel("title_"+d)),!1})});return a};this.getRootArtType=function(a){var b=getData_Common.getIdent_vaerktype(a);
a=this.caller.manager.translator.getLabel("arttype_hierarchi");for(var d=this.getParentType(a,b.trim()),b=null!=d&&void 0!==d.id?d.id:b.trim();null!=d&&void 0!==d.id;)b=d.id,d=this.getParentType(a,d.id.trim());return b};this.getParentType=function(a,b){var d,f;if(!a||!a.value)return null;if("[object Array]"===Object.prototype.toString.call(a.value)){for(d in a.value){if(a.value[d].id===b)return a;if(f=this.getParentType(a.value[d],b))return f}return null}return a.value.id===b?a:this.getParentType(a.value,
b)};this.caller=a}});(function(b,a){if("object"===typeof exports&&exports)a(exports);else{var c={};a(c);"function"===typeof define&&define.amd?define(c):b.getData_Teasers=c}})(this,function(b){b.constructor=function(a){this.getData=function(a){return{url:this.getDetailUrl(a),media:{title:getData_Common.getFirstTitle(a),alt:getData_Common.getMedia_alt(a),image:getData_Common.getMedia_image(a,"medium"),no_image:void 0===a.medium_image_url?!0:!1,copyright:getData_Common.getMedia_copyright(a,this.caller),copyright_text_cc0:this.caller.manager.translator.getLabel("teaser_copyright_def"),
img_id:a.id,url:this.getDetailUrl(a)},info:{producent_kunster:this.getListAllProducers(a),title_museum:getData_Common.getFirstTitle(a),datering_production_vaerkdatering:{lab:smkCommon.firstCapital(this.caller.manager.translator.getLabel("teaser_date_lab")),value:getData_Common.getProduction_vaerkdatering(a)},ident_invnummer:{lab:smkCommon.firstCapital(this.caller.manager.translator.getLabel("list_reference")),value:getData_Common.getIdent_invnummer(a)},location_location:smkCommon.firstCapital(getData_Common.getLocation_location(a,
this.caller)),url:this.getDetailUrl(a)},debug:{score:smkCommon.debugLog()?getData_Common.getScore(a):null}}};this.getDetailUrl=function(a){var b={};b.q=a.id;b.view="detail";b.lang=smkCommon.getCurrentLanguage();return ModelManager.buildURLFromModel(b)};this.getListAllProducers=function(a){var b=this;a=getData_Common.getProducent_all_producers(a);var d=[];$.each(a,function(a,c){c.type="orig"!=c.type?b.caller.manager.translator.getLabel("detail_producent_"+c.type):null;var g={artist_data:b.getArtistOutput(c)};
d.push(g)});d.show=0<d.length?!0:!1;return d};this.getArtistOutput=function(a){var b={};void 0!=a.name&&(b.name=a.name);smkCommon.isValidDataText(a.type)&&(b.role=a.type);return b};this.getImage=function(a){if(void 0!==a&&0!=a.length){var b=a.attr("src");a.attr("alt");a.attr("alt");return'<img src="'+b+'" />'}};this.caller=a}});(function(b,a){if("object"===typeof exports&&exports)a(exports);else{var c={};a(c);"function"===typeof define&&define.amd?define(c):b.getData_Advanced=c}})(this,function(b){b.constructor=function(a){this.getData=function(a){var b=this.caller.manager.translator.getLabel("advanced_search_panel_show"),d=this.caller.manager.translator.getLabel("advanced_search_panel_hide");return{show_panel_lab:b,hide_panel_lab:d,filters:this.proceedList(a)}};this.proceedList=function(a){var b=[];if(void 0!==a)for(var d=
0,f=a.length;d<f;d++){var h=[];lab=this.caller.manager.translator.getLabel("adv_"+a[d].lab+"_column_title");for(var g=0,k=a[d].values.length;g<k;g++)h.push({id:"adv_"+a[d].values[g].id,lang:a[d].values[g].lang});b.push({lab:lab,lab_tag:"adv_"+a[d].lab+"_column_title",values:h})}return b};this.caller=a}});(function(b,a){if("object"===typeof exports&&exports)a(exports);else{var c={};a(c);"function"===typeof define&&define.amd?define(c):b.Mustache=c}})(this,function(b){function a(a){return"function"===typeof a}function c(a){return a.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function e(a){if(!v(a)||2!==a.length)throw Error("Invalid tags: "+a);return[new RegExp(c(a[0])+"\\s*"),new RegExp("\\s*"+c(a[1]))]}function d(a){this.tail=this.string=a;this.pos=0}function f(a,b){this.view=null==a?{}:a;this.cache=
{".":this.view};this.parent=b}function h(){this.cache={}}var g=/\s*/,k=/\s+/,l=/\S/,q=/\s*=/,p=/\s*\}/,y=/#|\^|\/|>|\{|&|=|!/,D=RegExp.prototype.test,n=Object.prototype.toString,v=Array.isArray||function(a){return"[object Array]"===n.call(a)},B={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};d.prototype.eos=function(){return""===this.tail};d.prototype.scan=function(a){return(a=this.tail.match(a))&&0===a.index?(a=a[0],this.tail=this.tail.substring(a.length),this.pos+=a.length,
a):""};d.prototype.scanUntil=function(a){a=this.tail.search(a);var b;switch(a){case -1:b=this.tail;this.tail="";break;case 0:b="";break;default:b=this.tail.substring(0,a),this.tail=this.tail.substring(a)}this.pos+=b.length;return b};f.prototype.push=function(a){return new f(a,this)};f.prototype.lookup=function(b){var c;if(b in this.cache)c=this.cache[b];else{for(var d=this;d;){if(0<b.indexOf(".")){c=d.view;for(var e=b.split("."),f=0;null!=c&&f<e.length;)c=c[e[f++]]}else c=d.view[b];if(null!=c)break;
d=d.parent}this.cache[b]=c}a(c)&&(c=c.call(this.view));return c};h.prototype.clearCache=function(){this.cache={}};h.prototype.parse=function(a,f){if(!(a in this.cache)){var h=this.cache,w,n;n=f||b.tags;w=a||"";"string"===typeof n&&(n=n.split(k));var u=e(n),r=new d(w),E=[];w=[];for(var m=[],v=!1,x=!1,C,t,z,F;!r.eos();){C=r.pos;if(z=r.scanUntil(u[0])){F=0;for(var B=z.length;F<B;++F)if(t=z.charAt(F),D.call(l,t)?x=!0:m.push(w.length),w.push(["text",t,C,C+1]),C+=1,"\n"===t){if(v&&!x)for(;m.length;)delete w[m.pop()];
else m=[];x=v=!1}}if(!r.scan(u[0]))break;v=!0;t=r.scan(y)||"name";r.scan(g);"="===t?(z=r.scanUntil(q),r.scan(q),r.scanUntil(u[1])):"{"===t?(z=r.scanUntil(new RegExp("\\s*"+c("}"+n[1]))),r.scan(p),r.scanUntil(u[1]),t="&"):z=r.scanUntil(u[1]);if(!r.scan(u[1]))throw Error("Unclosed tag at "+r.pos);F=[t,z,C,r.pos];w.push(F);if("#"===t||"^"===t)E.push(F);else if("/"===t){t=E.pop();if(!t)throw Error('Unopened section "'+z+'" at '+C);if(t[1]!==z)throw Error('Unclosed section "'+t[1]+'" at '+C);}else"name"===
t||"{"===t||"&"===t?x=!0:"="===t&&(u=e(n=z.split(k)))}if(t=E.pop())throw Error('Unclosed section "'+t[1]+'" at '+r.pos);n=[];for(var A,r=0,E=w.length;r<E;++r)if(u=w[r])"text"===u[0]&&A&&"text"===A[0]?(A[1]+=u[1],A[3]=u[3]):(n.push(u),A=u);m=A=[];w=[];r=0;for(E=n.length;r<E;++r)switch(u=n[r],u[0]){case "#":case "^":m.push(u);w.push(u);m=u[4]=[];break;case "/":m=w.pop();m[5]=u[2];m=0<w.length?w[w.length-1][4]:A;break;default:m.push(u)}h[a]=A}return this.cache[a]};h.prototype.render=function(a,b,c){var d=
this.parse(a);b=b instanceof f?b:new f(b);return this.renderTokens(d,b,c,a)};h.prototype.renderTokens=function(c,d,e,f){function h(a){return l.render(a,d,e)}for(var g="",l=this,k,m,n=0,q=c.length;n<q;++n)switch(k=c[n],k[0]){case "#":m=d.lookup(k[1]);if(!m)continue;if(v(m))for(var p=0,t=m.length;p<t;++p)g+=this.renderTokens(k[4],d.push(m[p]),e,f);else if("object"===typeof m||"string"===typeof m)g+=this.renderTokens(k[4],d.push(m),e,f);else if(a(m)){if("string"!==typeof f)throw Error("Cannot use higher-order sections without the original template");
m=m.call(d.view,f.slice(k[3],k[5]),h);null!=m&&(g+=m)}else g+=this.renderTokens(k[4],d,e,f);break;case "^":m=d.lookup(k[1]);if(!m||v(m)&&0===m.length)g+=this.renderTokens(k[4],d,e,f);break;case ">":if(!e)continue;m=this.parse(a(e)?e(k[1]):e[k[1]]);null!=m&&(g+=this.renderTokens(m,d,e,f));break;case "&":m=d.lookup(k[1]);null!=m&&(g+=m);break;case "name":m=d.lookup(k[1]);null!=m&&(g+=b.escape(m));break;case "text":g+=k[1]}return g};b.name="mustache.js";b.version="0.8.0";b.tags=["{{","}}"];var x=new h;
b.getTemplate=function(a){var b;a=smkCommon.getCurrentPluginDir().concat(a);$.ajax({url:a,async:!1,type:"get",success:function(a){b=a},error:function(a){b=null}});return b};b.clearCache=function(){return x.clearCache()};b.parse=function(a,b){return x.parse(a,b)};b.render=function(a,b,c){return x.render(a,b,c)};b.to_html=function(c,d,e,f){c=b.render(c,d,e);if(a(f))f(c);else return c};b.escape=function(a){return String(a).replace(/[&<>"'\/]/g,function(a){return B[a]})};b.Scanner=d;b.Context=f;b.Writer=
h});$.fn.masonryImagesReveal=function(b,a,c,e,d,f){if(1==e.reset)return this;a.hide();smkCommon.debugTime()&&console.time(sprintf("scroll_request - masonryImagesReveal: append Tiles"));this.append(a);smkCommon.debugTime()&&console.timeEnd(sprintf("scroll_request - masonryImagesReveal: append Tiles"));smkCommon.debugTime()&&console.time(sprintf("scroll_request - masonryImagesReveal: imagesLoaded"));smkCommon.debugLog()&&console.log(sprintf(sprintf("scroll_request - masonryImagesReveal: scrollTop_%s",$(window).scrollTop())));
0==a.find("img").length?(a.each(function(){$(this).show();b.appended(this)}),c()):a.find("img").each(function(){$(this).delay(10).imagesLoaded().progress(function(d,f){if(1==e.reset)return this;$(f.img).removeClass("image-loading");0==$(b.element).find("img.image-loading").length&&(a.each(function(){$(this).show();b.appended(this);smkCommon.isElemIntoView($(this))||$(this).addClass("preloaded")}),smkCommon.debugLog()&&console.log(sprintf("scroll_request - masonryImagesReveal: preloaded_added_%s",
$(".preloaded").length)),c())})});smkCommon.debugTime()&&console.timeEnd(sprintf("scroll_request - masonryImagesReveal: imagesLoaded"));return this};$.taskQueue={_timer:null,_queue:[],add:function(b,a,c){var e=function(a){$.taskQueue._timer=setTimeout(function(){a=$.taskQueue.add();$.taskQueue._queue.length&&e(a)},a||2)};if(b)$.taskQueue._queue.push([b,a,c]),1==$.taskQueue._queue.length&&e(c);else{b=$.taskQueue._queue.shift();if(!b)return 0;b[0].call(b[1]||window);return b[2]}},clear:function(){clearTimeout($.taskQueue._timer);$.taskQueue._queue=[]}};$(document).ready(function(b){b.fn.dropit=function(a){var c={init:function(a){return this.dropit.settings=b.extend({},this.dropit.defaults,a),this.each(function(){var a=b(this),c=b.fn.dropit.settings;a.addClass("dropit").find(">"+c.triggerParentEl+":has("+c.submenuEl+")").addClass("dropit-trigger").find(c.submenuEl).addClass("dropit-submenu").hide();a.on(c.action,c.triggerParentEl+":has("+c.submenuEl+") > "+c.triggerEl,function(){return"click"==c.action&&b(this).parents(c.triggerParentEl).hasClass("dropit-open")?
(c.beforeHide.call(this),b(this).parents(c.triggerParentEl).removeClass("dropit-open").find(c.submenuEl).hide(),c.afterHide.call(this),!1):(c.beforeHide.call(this),b(".dropit-open").removeClass("dropit-open").find(".dropit-submenu").hide(),c.afterHide.call(this),c.beforeShow.call(this),b(this).parents(c.triggerParentEl).addClass("dropit-open").find(c.submenuEl).show(),c.afterShow.call(this),!1)});b(document).on("click",function(){c.beforeHide.call(this);b(".dropit-open").removeClass("dropit-open").find(".dropit-submenu").hide();
c.afterHide.call(this)});"mouseenter"==c.action&&a.on("mouseleave",function(){c.beforeHide.call(this);b(this).removeClass("dropit-open").find(c.submenuEl).hide();c.afterHide.call(this)});c.afterLoad.call(this)})}};return c[a]?c[a].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof a&&a?void b.error('Method "'+a+'" does not exist in dropit plugin!'):c.init.apply(this,arguments)};b.fn.dropit.defaults={action:"click",submenuEl:"ul",triggerEl:"a",triggerParentEl:"li",afterLoad:function(){},
beforeShow:function(){},afterShow:function(){},beforeHide:function(){},afterHide:function(){}};b.fn.dropit.settings={}}(jQuery));(function(b,a){if("object"===typeof exports&&exports)a(exports);else{var c={};a(c);"function"===typeof define&&define.amd?define(c):b.smkCommon=c}})(this,function(b){b.version="000";b.split_1_niv=";-;";b.split_2_niv=";--;";b.split_3_niv=";---;";b.split_4_niv=";-v;";b.enum_lang={def:"dk",en:"en",dk:"dk"};b.getValueFromSplit=function(a,c){return a.length>c&&b.isValidDataText(a[c])?a[c]:null};b.firstCapital=function(a){return this.isValidDataText(a)?a.charAt(0).toUpperCase()+a.slice(1):""};b.isValidDataText=
function(a,b){a=new String(a);if(void 0===a||null==a||"undefined"==a||"null"==a||"(blank)"==a||""==a.trim())return!1;var e=void 0===b?"defaut":b;a=a.trim().toLowerCase();switch(e){case "role":if("original"==a)return!1;break;case "agent":if("unknown"==a)return!1;break;case "date":case "orga_place":case "natio":if("undefined"==a||"null"==a||""==a||"(?)"==a)return!1}return!0};b.ordinal_suffix=function(a){for(;21<a;)a/=10;return"th"};b.replace_dansk_char=function(a){if(void 0===a)return a;var b=a=a.toLowerCase();
null!=a.match(/[\u00e6\u00f8\u00e5\u00e9]/g)&&(b=a.replace(/[\u00e6]/g,"ae").replace(/[\u00f8]/g,"oe").replace(/[\u00e5]/g,"aa").replace(/[\u00e9]/g,"e"));null!=b.match(/[\ufffd\ufffd\ufffd\ufffd]/g)&&(b=a.replace(/\ufffd/g,"ae").replace(/\ufffd/g,"oe").replace(/\ufffd/g,"aa").replace(/\ufffd/g,"e"));return b};b.replace_non_alpha_char=function(a){if(void 0===a)return a;a=a.toLowerCase();return a.replace(/[^a-zA-Z]/g,"_")};b.isElemIntoView=function(a){a=$(a);var b=$(window).scrollTop()+window.outerHeight,
e=a.offset().top;a.height();return e<=b};b.getDefaultPicture=function(a){var c="",e=b.getCurrentServerName(),d=b.getCurrentPluginDir();switch(a){case "small":c="http://%s/%simages/default_picture_2_small.png";break;case "medium":c="http://%s/%simages/default_picture_2_medium.png";break;case "large":c="http://%s/%simages/default_picture_2_large.png";break;default:c="http://%s/%simages/default_picture_2_small.png"}return sprintf(c,e,d)};b.getPluginURL=function(){var a=b.getCurrentServerName(),c=b.getCurrentPluginDir();
return sprintf("http://%s/%s",a,c)};b.getScaledPicture=function(a,c,e){a=1==e?sprintf("%s/%s","http://www.smk.dk",a):sprintf("%s",b.getLocation(a).pathname.replace(/^\/|/g,""));e="";switch(c){case "small":e="88";break;case "medium":e="198";break;case "large":e="418";break;default:e="88"}return sprintf("http://%s/?pic=%s&mode=width&width=%s","rs.smk.dk",a,e)};b.getLocation=function(a){var b=document.createElement("a");b.href=a;return b};b.getCurrentLanguage=function(){return ModelManager.get_lang()};
b.getCurrentPluginDir=function(){return smkSearchAllConf.pluginDir};b.getCurrentServerName=function(){return smkSearchAllConf.serverName};b.getSearchPOST=function(){return smkSearchAllConf.searchStringPOST};b.removeFirstFromArray=function(a){if(!AjaxSolr.isArray(a))return[];var b;b=arguments;var e=b.length;b=b[--e];0<a.length&&a[0].value==b&&a.splice(0,1);return a};b.setVersion=function(a){void 0!==a&&(b.version=a)};b.getVersion=function(a){return b.version};b.mode="prod";b.setMode=function(a){void 0!==
a&&(b.mode=a)};b.getMode=function(a){return b.mode};b.debugTime=function(){return 0<=b.mode.indexOf("perf")};b.debugLog=function(){return 0<=b.mode.indexOf("debug")}});(function(b,a){if("object"===typeof exports&&exports)a(exports);else{var c={};a(c);"function"===typeof define&&define.amd?define(c):b.Language=c}})(this,function(b){b.constructor=function(){this.load_json=function(a){a=smkCommon.getCurrentPluginDir().concat(a);$.ajax({dataType:"json",url:a,async:!1,success:$.proxy(function(a){for(var b in a){var d=a[b];switch(b){case "language":for(var f in d)this.labels[f]=d[f];break;case "collections":for(f in d)this.collections[f]=d[f];break;case "config":d.hasOwnProperty("default")&&
(this.default_lang=d["default"]),d.hasOwnProperty("version")&&(this.current_version=d.version)}}},this)})};this.getLabel=function(a){a=a.toLowerCase();return this.labels.hasOwnProperty(this.current_lang)||this.labels.hasOwnProperty(this.default_lang)?this.labels[this.current_lang].hasOwnProperty(a)?this.labels[this.current_lang][a]:this.labels.hasOwnProperty(this.default_lang)&&this.labels[this.default_lang].hasOwnProperty(a)?this.labels[this.default_lang][a]:"label unknow in language "+this.current_lang:
"neither selected or default language"};this.getCollection=function(a){return this.collections.hasOwnProperty(this.current_lang)||this.collections.hasOwnProperty(this.default_lang)?this.collections[this.current_lang].hasOwnProperty(a)?this.collections[this.current_lang][a]:this.collections.hasOwnProperty(this.default_lang)&&this.collections[this.default_lang].hasOwnProperty(a)?this.collections[this.default_lang][a]:this.collections[this.current_lang]["default"]:"neither selected or default language"};
this.setLanguage=function(a){this.current_lang=a};this.getLanguage=function(){return this.current_lang};this.getVersion=function(){return this.current_version};this.labels={};this.collections={};this.current_version=this.default_lang=this.current_lang=null}});(function(b,a){if("object"===typeof exports&&exports)a(exports);else{var c={};a(c);"function"===typeof define&&define.amd?define(c):b.Configurator=c}})(this,function(b){b.constructor=function(){this.load_json=function(a){a=smkCommon.getCurrentPluginDir().concat(a);$.ajax({dataType:"json",url:a,async:!1,success:$.proxy(function(a){for(var b in a){var d=a[b];switch(b){case "qf_default":this.qf_default=d;break;case "fq_default":this.fq_default=d;break;case "fl_options":this.fl_options=d;break;case "q_default":this.q_default=
d;break;case "sort_default":this.sort_default=d;break;case "exposed":this.exposed_params=d;break;case "facets":this.facets=d;break;case "server":this.server=d;break;case "server_proxy":this.server_proxy=d;break;case "scroll_rows_default":this.scroll_rows_default=d;break;case "rows_default":this.rows_default=d;break;case "mode":this.mode=d;break;case "version":this.version=d}}},this),error:$.proxy(function(a,b,d){},this)})};this.get_qf_default=function(){return this.qf_default};this.get_exposed_params=
function(){return this.exposed_params};this.get_filter_facets=function(){return this.facets.advanced};this.get_autocomplete_facets=function(){return this.facets.autocomplete};this.get_all_facets=function(){return this.extract_facets()};this.get_fq_default=function(){return this.fq_default};this.get_fl_options=function(){return this.fl_options};this.get_q_default=function(){return this.q_default};this.get_sort_default=function(){return this.sort_default};this.get_server=function(){return this.server};
this.get_server_proxy=function(){return this.server_proxy};this.get_scroll_rows_default=function(){return this.scroll_rows_default};this.get_rows_default=function(){return this.rows_default};this.get_mode=function(){return this.mode};this.get_version=function(){return this.version};this.get_all_standard_filters=function(){if(null!=this.facets)return this.facets.all.filters};this.get_all_advanced_filters=function(){if(null!=this.facets)return this.facets.all.advanced};this.default_lang="dk";this.rows_default=
this.scroll_rows_default=this.server_proxy=this.server=this.facets=this.exposed_params=this.sort_default=this.q_default=this.fl_options=this.fq_default=this.qf_default=null;this.mode="normal";this.version=null;this.extract_facets=function(){var a=[];$.each(this.facets.advanced,function(b,e){$.each(e.values,function(b,c){a.push(c.id)})});return a}}});
